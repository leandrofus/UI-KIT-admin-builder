{"version":3,"sources":["../src/components/TableToolbar.tsx","../src/components/TableRenderer.tsx","../src/components/TabRenderer.tsx","../src/components/FormRenderer.tsx","../src/components/DynamicModal.tsx","../src/components/SidebarRenderer.tsx","../node_modules/@dnd-kit/utilities/src/css.ts","../src/components/Kanban/KanbanCard.tsx","../src/components/Kanban/KanbanColumn.tsx","../src/components/Kanban/KanbanBoard.tsx","../src/components/Kanban/KanbanRenderer.tsx","../src/components/AdvancedSearchModal.tsx"],"names":["jsx","useState","useCallback","Fragment","jsxs","cn","t","useI18n","React","useEffect","resolveLabel","useMemo","evaluateConditions","useImperativeHandle","MIN_PX","parseWidthPx","MIN_CHAR_DISPLAY","CHAR_PX","forwardRef","getNestedValue","validateField","getModalTitle","getModalSubmitLabel","useRef","createPortal","CSS","freeze","Translate","toString","transform","x","y","Math","round","Scale","scaleX","scaleY","Transform","join","Transition","property","duration","easing","useSortable","useDroppable","SortableContext","verticalListSortingStrategy","useSensors","useSensor","PointerSensor","activeItem","DndContext","closestCenter","DragOverlay"],"mappings":"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","file":"chunk-LF3VXQAR.js","sourcesContent":["/**\n * TableToolbar Component\n * \n * Renders a toolbar above a table with search, filters, and action buttons\n * \n * Features:\n * - Text search input\n * - Advanced search modal\n * - Refresh button\n * - Create button\n * - Selection actions (show only when rows are selected)\n * - Dynamic column filters\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { t, resolveLabel } from '../i18n/I18n';\nimport { cn } from '../core/utils';\nimport type { ColumnConfig } from '../core/types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface TableToolbarProps {\n  /** Show search input */\n  showSearch?: boolean;\n  \n  /** Search placeholder text */\n  searchPlaceholder?: string;\n  \n  /** Current search value */\n  searchValue?: string;\n  \n  /** Callback when search input changes */\n  onSearch?: (query: string) => void;\n  \n  /** Show refresh button */\n  showRefresh?: boolean;\n  \n  /** Callback when refresh button is clicked */\n  onRefresh?: () => void;\n  \n  /** Loading state for refresh button */\n  refreshLoading?: boolean;\n  \n  /** Show create button */\n  showCreate?: boolean;\n  \n  /** Label for create button */\n  createLabel?: string;\n  \n  /** Callback when create button is clicked */\n  onCreate?: () => void;\n  \n  /** Show advanced search */\n  showAdvancedSearch?: boolean;\n  \n  /** Callback when advanced search is opened */\n  onAdvancedSearch?: () => void;\n  \n  /** Number of selected rows (shows selection actions) */\n  selectedCount?: number;\n  \n  /** Callback when selection actions are triggered */\n  onClearSelection?: () => void;\n  \n  /** Callback when delete selected is clicked */\n  onDeleteSelected?: () => void;\n  \n  /** Callback when toggle enabled is clicked */\n  onToggleEnabled?: () => void;\n  \n  /** Delete selected button label */\n  deleteLabel?: string;\n\n  /** Callback when export selected is clicked */\n  onExport?: () => void;\n\n  /** Show export button in main toolbar */\n  showExport?: boolean;\n  \n  /** Custom toolbar height */\n  height?: string | number;\n  \n  /** Custom class name */\n  className?: string;\n  \n  /** Column definitions (for advanced filtering) */\n  columns?: ColumnConfig[];\n  \n  /** Custom toolbar content (renders after standard buttons) */\n  renderCustomContent?: () => React.ReactNode;\n\n  /** Optional handler to open a Columns selector modal */\n  onOpenColumns?: () => void;\n\n  /** Show a columns button (only rendered if onOpenColumns is provided) */\n  showColumnsButton?: boolean;\n\n  /** Whether column prefs need syncing (will show a small indicator) */\n  columnsNeedsSync?: boolean;\n  \n  /** Show view switcher (Table/Kanban) */\n  showViewSwitcher?: boolean;\n\n  /** Current active view */\n  activeView?: 'table' | 'kanban';\n\n  /** Callback when view changes */\n  onViewChange?: (view: 'table' | 'kanban') => void;\n  \n  /** Disable entire toolbar */\n  disabled?: boolean;\n  \n  /** Show border bottom */\n  bordered?: boolean;\n}\n\n// ============================================================================\n// ICONS\n// ============================================================================\n\nconst Icons = {\n  search: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.5 5.5a7.5 7.5 0 0 0 10.5 10.5Z\" />\n    </svg>\n  ),\n  refresh: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992M2.763 9.348c.547-4.055 4.29-7.298 8.888-7.298 4.694 0 8.502 3.362 8.996 7.748h4.992v-.001M2.723 13.467c.12.95.904 1.676 1.9 1.676h15.692c.996 0 1.78-.726 1.9-1.676m-17.492 0a2.25 2.25 0 0 0-1.853-2.965 2.25 2.25 0 0 0-2.236 2.965m19.5 0a2.25 2.25 0 0 0 1.853-2.965 2.25 2.25 0 0 0 2.236 2.965\" />\n    </svg>\n  ),\n  plus: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n    </svg>\n  ),\n  trash: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L19.18 2.318c.169-.897-.134-1.638-1.034-1.638h-5.096c-.9 0-1.203.74-1.034 1.638L9.26 9M4.25 9L4.596 18c.305 1.619 1.045 2.5 2.589 2.5h6.63c1.544 0 2.284-.881 2.589-2.5l.346-9m-4.215 0h3.02m-9.755 0c.342.052.682.107 1.022.166\" />\n    </svg>\n  ),\n  advancedSearch: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.5 6a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15ZM21 21l-5.197-5.197\" />\n    </svg>\n  ),\n  toggle: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9\" />\n    </svg>\n  ),\n  table: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5a1.125 1.125 0 0 0 1.125 1.125m17.25 0a1.125 1.125 0 0 0 1.125-1.125m-1.125 1.125a1.125 1.125 0 0 1-1.125-1.125M3.375 11.25h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 11.25a1.125 1.125 0 0 0 1.125 1.125m17.25 0a1.125 1.125 0 0 0 1.125-1.125m-1.125 1.125a1.125 1.125 0 0 1-1.125-1.125M3.375 3h17.25m-17.25 0a1.125 1.125 0 0 1-1.125 1.125M3.375 3a1.125 1.125 0 0 0 1.125-1.125m17.25 0a1.125 1.125 0 0 0 1.125 1.125m-1.125-1.125a1.125 1.125 0 0 1-1.125 1.125\" />\n    </svg>\n  ),\n  kanban: (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 6.75v10.5m1.125-10.5h1.125a1.125 1.125 0 0 1 1.125 1.125v1.125a1.125 1.125 0 0 1-1.125 1.125H7.125a1.125 1.125 0 0 1-1.125-1.125V7.875a1.125 1.125 0 0 1 1.125-1.125Zm5.625 0h1.125a1.125 1.125 0 0 1 1.125 1.125v1.125a1.125 1.125 0 0 1-1.125 1.125h-1.125a1.125 1.125 0 0 1-1.125-1.125V7.875a1.125 1.125 0 0 1 1.125-1.125Zm5.625 0h1.125a1.125 1.125 0 0 1 1.125 1.125v1.125a1.125 1.125 0 0 1-1.125 1.125h-1.125a1.125 1.125 0 0 1-1.125-1.125V7.875a1.125 1.125 0 0 1 1.125-1.125Z\" />\n    </svg>\n  ),\n};\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nexport function TableToolbar(props: TableToolbarProps): React.ReactElement {\n\n  const {\n    showSearch = false,\n    searchPlaceholder,\n    searchValue = '',\n    onSearch,\n    showRefresh = false,\n    onRefresh,\n    refreshLoading = false,\n    showCreate = false,\n    createLabel,\n    onCreate,\n    showAdvancedSearch = false,\n    onAdvancedSearch,\n    selectedCount = 0,\n    onClearSelection,\n    onDeleteSelected,\n    onToggleEnabled,\n    deleteLabel,\n    onExport,\n    height = '56px',\n    className,\n    columns,\n    renderCustomContent,\n    onOpenColumns,\n    showColumnsButton = false,\n    columnsNeedsSync = false,\n    showViewSwitcher = false,\n    activeView = 'table',\n    onViewChange,\n    disabled = false,\n    bordered = true,\n  } = props;\n\n  const [localSearch, setLocalSearch] = useState(searchValue);\n\n  const handleSearchChange = useCallback((value: string) => {\n    setLocalSearch(value);\n    onSearch?.(value);\n  }, [onSearch]);\n\n  // Only render if there are any tools to show\n  const hasTools = showSearch || showRefresh || showCreate || showAdvancedSearch || props.showColumnsButton || (props.showExport && onExport);\n  \n  if (!hasTools && selectedCount === 0 && !renderCustomContent) {\n    return <></>;\n  }\n\n  return (\n    <div\n      className={cn(\n        'dui-table-toolbar',\n        bordered && 'dui-table-toolbar-bordered',\n        disabled && 'dui-table-toolbar-disabled',\n        className\n      )}\n    >\n      {/* 1. Left Side: Search & Advanced Search (Always Visible) */}\n      {showSearch && (\n        <div className=\"dui-table-toolbar-search\">\n          {Icons.search}\n          <input\n            type=\"text\"\n            value={localSearch}\n            onChange={(e) => handleSearchChange(e.target.value)}\n            placeholder={searchPlaceholder || t('table.search', { default: 'Buscar...' })}\n            disabled={disabled}\n            className=\"v2-input v2-input-with-icon\"\n          />\n        </div>\n      )}\n\n      {showAdvancedSearch && onAdvancedSearch && (\n        <button\n          type=\"button\"\n          onClick={onAdvancedSearch}\n          disabled={disabled}\n          className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n          title={t('table.advancedSearch', { default: 'Bsqueda avanzada' })}\n        >\n          {Icons.advancedSearch}\n          {t('table.advancedSearch', { default: 'Avanzada' })}\n        </button>\n      )}\n\n      {/* View Switcher (Table/Kanban) */}\n      {showViewSwitcher && onViewChange && (\n        <div className=\"dui-table-view-switcher\" style={{ display: 'flex', background: 'var(--bg-tertiary)', padding: '2px', borderRadius: '8px', marginLeft: '0.5rem' }}>\n          <button\n            type=\"button\"\n            onClick={() => onViewChange('table')}\n            className={cn(\n              \"dui-table-toolbar-btn px-2 py-1 border-0\",\n              activeView === 'table' ? \"bg-white shadow-sm dark:bg-gray-700 dark:text-white\" : \"bg-transparent text-muted\"\n            )}\n            style={{ borderRadius: '6px', minWidth: '40px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n            title={t('table.viewTable', { default: 'Vista Tabla' })}\n          >\n            {Icons.table}\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => onViewChange('kanban')}\n            className={cn(\n              \"dui-table-toolbar-btn px-2 py-1 border-0\",\n              activeView === 'kanban' ? \"bg-white shadow-sm dark:bg-gray-700 dark:text-white\" : \"bg-transparent text-muted\"\n            )}\n            style={{ borderRadius: '6px', minWidth: '40px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n            title={t('table.viewKanban', { default: 'Vista Kanban' })}\n          >\n            {Icons.kanban}\n          </button>\n        </div>\n      )}\n\n      {/* 2. Middle: Spacer */}\n      <div className=\"dui-table-toolbar-spacer\" />\n\n      {/* 3. Right Side: Actions (Context Sensitive) */}\n      <div className=\"dui-table-toolbar-actions\" style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n        \n        {/* Selection Actions */}\n        {selectedCount > 0 ? (\n          <>\n            <span className=\"dui-table-toolbar-selection-badge\" style={{ marginRight: '0.5rem' }}>\n              {t('table.selected', { count: selectedCount })}\n            </span>\n            \n            {onDeleteSelected && (\n              <button\n                type=\"button\"\n                onClick={onDeleteSelected}\n                disabled={disabled}\n                className=\"dui-table-toolbar-btn dui-table-toolbar-btn-danger\"\n              >\n                {Icons.trash}\n                {deleteLabel || t('table.delete')}\n              </button>\n            )}\n\n            {onToggleEnabled && (\n              <button\n                type=\"button\"\n                onClick={onToggleEnabled}\n                disabled={disabled}\n                className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n                title={t('table.toggleEnabled', { default: 'Habilitar/Deshabilitar' })}\n              >\n                {Icons.toggle}\n              </button>\n            )}\n\n            {onClearSelection && (\n              <button\n                type=\"button\"\n                onClick={onClearSelection}\n                disabled={disabled}\n                className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n              >\n                {t('table.clearSelection')}\n              </button>\n            )}\n            \n            {/* Divider between selection actions and common actions */}\n            <div style={{ width: 1, height: 24, background: 'var(--border-color)', margin: '0 0.25rem' }} />\n          </>\n        ) : (\n          /* Normal Actions (Refresh, Create) */\n          <>\n            {showRefresh && onRefresh && (\n              <button\n                type=\"button\"\n                onClick={onRefresh}\n                disabled={disabled || refreshLoading}\n                className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n                title={t('table.refresh', { default: 'Refrescar' })}\n              >\n                {Icons.refresh}\n                {t('table.refresh', { default: 'Refrescar' })}\n              </button>\n            )}\n\n            {showCreate && onCreate && (\n              <button\n                type=\"button\"\n                onClick={onCreate}\n                disabled={disabled}\n                className=\"dui-table-toolbar-btn dui-table-toolbar-btn-primary\"\n              >\n                {Icons.plus}\n                {createLabel || t('table.create', { default: 'Crear' })}\n              </button>\n            )}\n          </>\n        )}\n\n        {/* Common Actions (Always Visible or contextual logic preserved) */}\n        \n        {/* Export */}\n        {props.showExport && onExport && (\n          <button\n            type=\"button\"\n            onClick={onExport}\n            disabled={disabled}\n            className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n            title={t('export', { default: 'Exportar' })}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" style={{ width: '1.2em', height: '1.2em' }}>\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5\" />\n            </svg>\n            {/* Show label only if selected count is 0 to save space, or just icon? Keeping icon + text for consistency */}\n            {selectedCount > 0 ? '' : t('export', { default: 'Exportar' })}\n          </button>\n        )}\n\n        {/* Columns */}\n        {props.showColumnsButton && onOpenColumns && (\n          <button\n            type=\"button\"\n            onClick={onOpenColumns}\n            disabled={disabled}\n            className=\"dui-table-toolbar-btn dui-table-toolbar-btn-secondary\"\n            title={t('columns.title', { default: 'Columnas' })}\n          >\n            {t('columns.title', { default: 'Columnas' })}\n            {columnsNeedsSync && (\n              <span style={{ display: 'inline-block', width: 8, height: 8, background: '#ef4444', borderRadius: 8, marginLeft: 8 }} />\n            )}\n          </button>\n        )}\n\n        {/* Custom Content */}\n        {renderCustomContent && (\n          <div className=\"dui-table-toolbar-custom\">\n            {renderCustomContent()}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default TableToolbar;\n","/**\n * TableRenderer Component\n * \n * A flexible, configurable data table component with built-in support for:\n * - Pagination (with customizable page sizes)\n * - Sorting (single and multi-column)\n * - Filtering (text, select, date range)\n * - Row selection (single and multi-select)\n * - Custom cell rendering\n * - Column visibility toggles\n * - Responsive design with horizontal scroll\n * \n * @module components/TableRenderer\n */\n\nimport React, { \n  useMemo, \n  useCallback, \n  useState,\n  useEffect,\n  forwardRef,\n  useImperativeHandle,\n  type ReactNode,\n  type CSSProperties \n} from 'react';\n\nimport type { \n  TableConfig, \n  ColumnConfig, \n  DataRecord, \n  FieldValue\n} from '../core/types';\nimport { cn } from '../core/utils';\nimport { evaluateConditions } from '../core/validators';\nimport { useI18n, resolveLabel, t } from '../i18n/I18n';\nimport { TableToolbar } from './TableToolbar';\n\n// ============================================================================\n// Types\n// ============================================================================\n\n/**\n * Sort direction type\n */\nexport type SortDirection = 'asc' | 'desc' | null;\n\n/**\n * Column sort state\n */\nexport interface ColumnSortState {\n  key: string;\n  direction: SortDirection;\n}\n\n/**\n * Filter value can be string, array (for multi-select), or object (for ranges)\n */\nexport type FilterValue = \n  | string \n  | string[] \n  | { from?: string | number; to?: string | number };\n\n/**\n * Table filter state\n */\nexport interface TableFilterState {\n  [columnKey: string]: FilterValue;\n}\n\n/**\n * Props for the TableRenderer component\n */\nexport interface TableRendererProps<T extends DataRecord = DataRecord> {\n  /** Table configuration object */\n  config: TableConfig;\n  \n  /** Data array to display */\n  data: T[];\n  \n  /** Total number of records (for server-side pagination) */\n  totalCount?: number;\n  \n  /** Loading state indicator */\n  loading?: boolean;\n  \n  /** Error message to display */\n  error?: string | null;\n  \n  /** Current page number (1-indexed) */\n  page?: number;\n  \n  /** Number of items per page */\n  pageSize?: number;\n  \n  /** Available page size options */\n  pageSizeOptions?: number[];\n  \n  /** Callback when page changes */\n  onPageChange?: (page: number) => void;\n  \n  /** Callback when page size changes */\n  onPageSizeChange?: (pageSize: number) => void;\n  \n  /** Callback when sort changes */\n  onSortChange?: (sort: ColumnSortState | null) => void;\n  \n  /** Callback when filters change */\n  onFilterChange?: (filters: TableFilterState) => void;\n  \n  /** Callback when row is clicked */\n  onRowClick?: (row: T, index: number) => void;\n  \n  /** Callback when row is double-clicked */\n  onRowDoubleClick?: (row: T, index: number) => void;\n  \n  /** Callback when selection changes */\n  onSelectionChange?: (selectedIds: Array<string | number>) => void;\n\n  /** Optional handler to open a Columns selector modal in toolbar */\n  onToolbarOpenColumns?: () => void;\n\n  /** Whether the toolbar should show a 'needs sync' indicator for columns */\n  toolbarColumnsNeedsSync?: boolean;\n  \n  /** Selected row IDs (controlled mode) */\n  selectedIds?: Array<string | number>;\n  \n  /** Row key accessor function or string */\n  /** Theme mode: 'system' (prefers-color-scheme), 'light' or 'dark' */\n  theme?: 'system' | 'light' | 'dark';\n  \n  /** Prevent layout shift when scrollbar appears/disappears (default: true) */\n  preventLayoutShift?: boolean;\n  rowKey?: string | ((row: T) => string | number);\n  \n  /** Custom class names */\n  className?: string;\n  \n  /** Custom inline styles */\n  style?: CSSProperties;\n  \n  /** Empty state render function */\n  renderEmpty?: () => ReactNode;\n  \n  /** Loading state render function */\n  renderLoading?: () => ReactNode;\n  \n  /** Error state render function */\n  renderError?: (error: string) => ReactNode;\n  \n  /** Custom header render function */\n  renderHeader?: (columns: ColumnConfig[]) => ReactNode;\n  \n  /** Custom row render function */\n  renderRow?: (row: T, index: number, columns: ColumnConfig[]) => ReactNode;\n  \n  /** Actions column content (rendered at the end of each row) */\n  renderActions?: (row: T, index: number) => ReactNode;\n  \n  /** Enable sticky header */\n  stickyHeader?: boolean;\n  \n  /** Maximum height before scrolling (enables virtual scroll appearance) */\n  maxHeight?: string | number;\n  \n  /** Stripe alternate rows */\n  striped?: boolean;\n  \n  /** Add hover effect to rows */\n  hoverable?: boolean;\n  \n  /** Add border between rows */\n  bordered?: boolean;\n  \n  /** Compact row padding */\n  compact?: boolean;\n  \n  /** Enable row selection */\n  selectable?: boolean;\n  \n  /** Selection mode: single or multiple */\n  selectionMode?: 'single' | 'multiple';\n  \n  /** Show row numbers */\n  showRowNumbers?: boolean;\n  \n  /** Value to display for null/undefined cells */\n  emptyValue?: string;\n\n  /** Enable tree table (hierarchical rows) */\n  isTreeTable?: boolean;\n  \n  /** Row keys that are expanded */\n  expandedRowKeys?: Array<string | number>;\n  \n  /** Callback when a parent row is expanded/collapsed */\n  onToggleExpand?: (row: T, expanded: boolean) => void;\n  \n  /** Custom sub-row render function */\n  renderSubRow?: (row: T) => ReactNode;\n\n  /** Feature flags for conditional rendering */\n  featureFlags?: Record<string, boolean>;\n  \n  // =========================================================================\n  // TOOLBAR PROPS\n  // =========================================================================\n  \n  /** Show toolbar above table */\n  showToolbar?: boolean;\n  \n  /** Show search input in toolbar */\n  showToolbarSearch?: boolean;\n  \n  /** Search placeholder text */\n  toolbarSearchPlaceholder?: string;\n  \n  /** Current search value (for controlled search) */\n  toolbarSearchValue?: string;\n  \n  /** Callback when toolbar search changes */\n  onToolbarSearch?: (query: string) => void;\n  \n  /** Show refresh button in toolbar */\n  showToolbarRefresh?: boolean;\n  \n  /** Callback when refresh button is clicked */\n  onToolbarRefresh?: () => void;\n  \n  /** Show create button in toolbar */\n  showToolbarCreate?: boolean;\n  \n  /** Create button label */\n  toolbarCreateLabel?: string;\n  \n  /** Callback when create button is clicked */\n  onToolbarCreate?: () => void;\n  \n  /** Show advanced search button in toolbar */\n  showToolbarAdvancedSearch?: boolean;\n  \n  /** Callback when advanced search button is clicked */\n  onToolbarAdvancedSearch?: () => void;\n  \n  /** Delete selected button label */\n  toolbarDeleteLabel?: string;\n  \n  /** Callback when delete selected is clicked */\n  onToolbarDeleteSelected?: () => void;\n  \n  /** Callback when toggle enabled is clicked in toolbar */\n  onToolbarToggleEnabled?: () => void;\n  \n  /** Custom toolbar content render function */\n  renderToolbarCustomContent?: () => ReactNode;\n  \n  /** Disable toolbar */\n  toolbarDisabled?: boolean;\n\n  /** Component to render icons (e.g. from Lucide) */\n  IconComponent?: React.ComponentType<{ name: string; className?: string }>;\n}\n\n/**\n * Table renderer ref interface\n */\nexport interface TableRendererRef {\n  /** Clear all filters */\n  clearFilters: () => void;\n  /** Clear selection */\n  clearSelection: () => void;\n  /** Reset to first page */\n  resetPage: () => void;\n  /** Get current filter state */\n  getFilters: () => TableFilterState;\n  /** Get selected row IDs */\n  getSelectedIds: () => Array<string | number>;\n}\n\n// ============================================================================\n// Helper Components\n// ============================================================================\n\n/**\n * Default empty state component\n */\nfunction DefaultEmptyState(): JSX.Element {\n  const { t } = useI18n();\n  return (\n    <div className=\"dui-table-empty\">\n      <svg \n        className=\"dui-table-empty-icon\" \n        viewBox=\"0 0 24 24\" \n        fill=\"none\" \n        stroke=\"currentColor\"\n        width=\"48\"\n        height=\"48\"\n      >\n        <path \n          strokeLinecap=\"round\" \n          strokeLinejoin=\"round\" \n          strokeWidth={1.5} \n          d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" \n        />\n      </svg>\n      <p className=\"dui-table-empty-text\">{t('table.empty')}</p>\n    </div>\n  );\n}\n\n/**\n * Default loading state component\n */\nfunction DefaultLoadingState(): JSX.Element {\n  const { t } = useI18n();\n  return (\n    <div className=\"dui-table-loading\">\n      <div className=\"dui-table-loading-spinner\" />\n      <p className=\"dui-table-loading-text\">{t('table.loading')}</p>\n    </div>\n  );\n}\n\n/**\n * Default error state component\n */\nfunction DefaultErrorState({ error }: { error: string }): JSX.Element {\n  const { t } = useI18n();\n  return (\n    <div className=\"dui-table-error\">\n      <svg \n        className=\"dui-table-error-icon\" \n        viewBox=\"0 0 24 24\" \n        fill=\"none\" \n        stroke=\"currentColor\"\n        width=\"48\"\n        height=\"48\"\n      >\n        <path \n          strokeLinecap=\"round\" \n          strokeLinejoin=\"round\" \n          strokeWidth={1.5} \n          d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" \n        />\n      </svg>\n      <p className=\"dui-table-error-text\">{t('table.error')}</p>\n      <p className=\"dui-table-error-detail\">{error}</p>\n    </div>\n  );\n}\n\n/**\n * Sort indicator icon\n */\nfunction SortIndicator({ direction }: { direction: SortDirection }): JSX.Element {\n  if (!direction) {\n    return (\n      <svg className=\"dui-table-sort-icon dui-table-sort-inactive\" viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\">\n        <path d=\"M7 10l5-5 5 5H7z M7 14l5 5 5-5H7z\" />\n      </svg>\n    );\n  }\n  \n  return (\n    <svg \n      className={cn('dui-table-sort-icon', direction === 'desc' && 'dui-table-sort-desc')} \n      viewBox=\"0 0 24 24\" \n      width=\"16\" \n      height=\"16\" \n      fill=\"currentColor\"\n    >\n      {direction === 'asc' \n        ? <path d=\"M7 14l5-5 5 5H7z\" />\n        : <path d=\"M7 10l5 5 5-5H7z\" />\n      }\n    </svg>\n  );\n}\n\n/**\n * Checkbox component for row selection\n */\nfunction Checkbox({ \n  checked, \n  indeterminate, \n  onChange,\n  disabled \n}: { \n  checked: boolean; \n  indeterminate?: boolean;\n  onChange: (checked: boolean) => void;\n  disabled?: boolean;\n}): JSX.Element {\n  const ref = React.useRef<HTMLInputElement>(null);\n  \n  useEffect(() => {\n    if (ref.current) {\n      ref.current.indeterminate = indeterminate ?? false;\n    }\n  }, [indeterminate]);\n  \n  return (\n    <input\n      ref={ref}\n      type=\"checkbox\"\n      className=\"dui-table-checkbox\"\n      checked={checked}\n      disabled={disabled}\n      onChange={(e) => onChange(e.target.checked)}\n    />\n  );\n}\n\n// ============================================================================\n// Cell Renderers\n// ============================================================================\n\n// Utilities for resize-based truncation\nconst MIN_CHAR_DISPLAY = 6;\nconst CHAR_PX = 8; // heuristic px per char\nconst MIN_PX = MIN_CHAR_DISPLAY * CHAR_PX;\n\n// Utility: parse computed width as number of pixels\nconst parseWidthPx = (col: any): number | null => {\n  const w = col._computedWidth ?? col.width;\n  if (w == null) return null;\n  if (typeof w === 'number') return w;\n  const str = String(w).trim();\n  const m = str.match(/^(\\d+)/);\n  if (m) return Number(m[1]);\n  return null;\n};\n\n/**\n * Get the value from a row using accessor\n */\nfunction getCellValue<T extends DataRecord>(\n  row: T, \n  column: ColumnConfig\n): unknown {\n  const accessor = column.accessor || column.key;\n  \n  // Handle nested paths like \"user.name\"\n  if (typeof accessor === 'string' && accessor.includes('.')) {\n    return accessor.split('.').reduce((obj: unknown, key: string) => {\n      if (obj && typeof obj === 'object') {\n        return (obj as Record<string, unknown>)[key];\n      }\n      return undefined;\n    }, row);\n  }\n  \n  return row[accessor as string];\n}\n\n/**\n * Format cell value based on column configuration\n */\nfunction formatCellValue<T extends DataRecord>(\n  value: unknown, \n  column: ColumnConfig<T>,\n  row: T,\n  emptyValuePlaceholder: string\n): ReactNode {\n  // Handle null/undefined\n  if (value === null || value === undefined) {\n    return emptyValuePlaceholder;\n  }\n  \n  // Use custom render function if provided\n  if (column.render) {\n    // Cast to any to avoid type conflicts with nested React types during build\n    return column.render(value as FieldValue, row, 0) as unknown as ReactNode;\n  }\n\n  // Use format function if provided\n  if (column.format) {\n    return column.format(value as FieldValue, row);\n  }\n  \n  // Type-specific formatting\n  switch (column.type) {\n    case 'number':\n    case 'currency':\n    case 'percent': {\n      const num = typeof value === 'number' ? value : parseFloat(String(value));\n      if (isNaN(num)) return String(value);\n\n      const localeToUse = (column as any).locale || 'es-AR';\n      \n      if (column.type === 'currency') {\n        const currencyCode = (column as any).currency || 'USD';\n        return new Intl.NumberFormat(localeToUse, { \n          style: 'currency', \n          currency: currencyCode,\n          minimumFractionDigits: 2 \n        }).format(num);\n      }\n      \n      if (column.type === 'percent') {\n        return new Intl.NumberFormat(localeToUse, { \n          style: 'percent',\n          minimumFractionDigits: 0,\n          maximumFractionDigits: 2 \n        }).format(num / 100);\n      }\n      \n      return new Intl.NumberFormat(localeToUse).format(num);\n    }\n    \n    case 'date':\n    case 'datetime': {\n      const date = value instanceof Date ? value : new Date(String(value));\n      if (isNaN(date.getTime())) return String(value);\n      const localeToUse = (column as any).locale || 'es-AR';\n      \n      return new Intl.DateTimeFormat(localeToUse, {\n        dateStyle: 'medium',\n        timeStyle: column.type === 'datetime' ? 'short' : undefined\n      }).format(date);\n    }\n    \n    case 'boolean':\n      return value ? '' : '';\n    \n    case 'badge':\n    case 'status': {\n      // Arrays -> render each item as a badge\n      if (Array.isArray(value)) {\n        return (\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px', alignItems: 'center' }}>\n            {(value as any[]).map((item, i) => {\n              const display = (item && typeof item === 'object') ? (item.label ?? item.name ?? String(item)) : String(item);\n              return <span key={i} className={cn('dui-table-badge')}>{display}</span>;\n            })}\n          </div>\n        );\n      }\n\n      // Lookup in variants if available\n      const variants = (column as any).variants as any[];\n      if (variants && variants.length > 0) {\n        const variant = variants.find(v => \n          String(v.value).toLowerCase() === String(value).toLowerCase() || \n          String(v.id).toLowerCase() === String(value).toLowerCase()\n        );\n        if (variant) {\n          const display = resolveLabel(variant.label || variant.name || String(variant.value));\n          const colorValue = variant.color || 'gray';\n          const isHex = /^#|^rgb|^hsl/.test(colorValue);\n          \n          return (\n            <span \n              className={cn('dui-table-badge', !isHex && `dui-table-badge-${colorValue.toLowerCase()}`)}\n              style={isHex ? { backgroundColor: colorValue, color: '#fff', border: 'none' } : undefined}\n            >\n              {display}\n            </span>\n          );\n        }\n      }\n\n      // Objects -> try to display sensible nested label\n      if (value && typeof value === 'object') {\n        const obj = value as Record<string, any>;\n        const display = obj.label ?? obj.name ?? obj.businessName ?? obj.value ?? JSON.stringify(obj);\n        const color = obj.color;\n        \n        return (\n          <span \n            className={cn('dui-table-badge')}\n            style={color ? { backgroundColor: color, color: '#fff' } : undefined}\n          >\n            {String(display)}\n          </span>\n        );\n      }\n\n      return (\n        <span className={cn('dui-table-badge', `dui-table-badge-${String(value).toLowerCase()}`)}>\n          {String(value)}\n        </span>\n      );\n    }\n    \n    case 'link':\n      return (\n        <a \n          href={String(value)} \n          className=\"dui-table-link\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {String(value)}\n        </a>\n      );\n    \n    case 'html':\n      return <div dangerouslySetInnerHTML={{ __html: String(value) }} />;\n    \n    default:\n      // If value is object/array try to resolve to a human string\n      if (Array.isArray(value)) {\n        return (value as any[]).map((v, i) => <span key={i}>{(v && typeof v === 'object') ? (v.label ?? v.name ?? String(v)) : String(v)}</span>);\n      }\n\n      if (value && typeof value === 'object') {\n        const obj = value as Record<string, any>;\n        const display = obj.label ?? obj.name ?? obj.businessName ?? obj.value ?? JSON.stringify(obj);\n        // Truncate if column is very narrow\n        const widthPx = parseWidthPx(column as any);\n        if (widthPx !== null && widthPx <= MIN_PX && typeof display === 'string') {\n          return String(display).length > MIN_CHAR_DISPLAY ? `${String(display).slice(0, MIN_CHAR_DISPLAY)}` : String(display);\n        }\n        return String(display);\n      }\n\n      // Primitive (string/number)\n      {\n        const s = String(value);\n        const widthPx = parseWidthPx(column as any);\n        if (widthPx !== null && widthPx <= MIN_PX) {\n          return s.length > MIN_CHAR_DISPLAY ? `${s.slice(0, MIN_CHAR_DISPLAY)}` : s;\n        }\n        return s;\n      }\n  }\n}\n\n// ============================================================================\n// Pagination Component\n// ============================================================================\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  pageSize: number;\n  totalCount: number;\n  pageSizeOptions: number[];\n  onPageChange: (page: number) => void;\n  onPageSizeChange: (pageSize: number) => void;\n}\n\nfunction Pagination({\n  currentPage,\n  totalPages,\n  pageSize,\n  totalCount,\n  pageSizeOptions,\n  onPageChange,\n  onPageSizeChange\n}: PaginationProps): JSX.Element {\n  const { t } = useI18n();\n  \n  const startRecord = totalCount === 0 ? 0 : (currentPage - 1) * pageSize + 1;\n  const endRecord = Math.min(currentPage * pageSize, totalCount);\n  \n  // Generate page numbers to display\n  const pageNumbers = useMemo(() => {\n    const pages: (number | 'ellipsis')[] = [];\n    const maxVisiblePages = 9; // Increased from 7 to show more pages\n    \n    if (totalPages <= maxVisiblePages) {\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // Always show first page\n      pages.push(1);\n      \n      // Show ellipsis if current page is far from start\n      if (currentPage > 4) {\n        pages.push('ellipsis');\n      }\n      \n      // Show 2 pages before and after current page (5 total including current)\n      for (let i = Math.max(2, currentPage - 2); i <= Math.min(totalPages - 1, currentPage + 2); i++) {\n        if (!pages.includes(i)) {\n          pages.push(i);\n        }\n      }\n      \n      // Show ellipsis if current page is far from end\n      if (currentPage < totalPages - 3) {\n        pages.push('ellipsis');\n      }\n      \n      // Always show last page\n      if (!pages.includes(totalPages)) {\n        pages.push(totalPages);\n      }\n    }\n    \n    return pages;\n  }, [currentPage, totalPages]);\n  \n  return (\n    <div className=\"dui-table-pagination\">\n      <div className=\"dui-table-pagination-info\">\n        {t('table.pagination.showing', \n          { start: startRecord, end: endRecord, total: totalCount }, \n          `Showing ${startRecord} to ${endRecord} of ${totalCount} entries`\n        )}\n      </div>\n      \n      <div className=\"dui-table-pagination-controls\">\n        <div className=\"dui-table-pagination-pagesize\">\n          <label>{t('table.pagination.pageSize', {}, 'Page size')}:</label>\n          <select\n            value={pageSize}\n            onChange={(e) => onPageSizeChange(Number(e.target.value))}\n            className=\"dui-table-pagination-select\"\n          >\n            {pageSizeOptions.map((size) => (\n              <option key={size} value={size}>\n                {size}\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        <nav className=\"dui-table-pagination-nav\">\n          <button\n            className=\"dui-table-pagination-btn\"\n            onClick={() => onPageChange(1)}\n            disabled={currentPage === 1}\n            aria-label={t('table.pagination.first')}\n          >\n            \n          </button>\n          \n          <button\n            className=\"dui-table-pagination-btn\"\n            onClick={() => onPageChange(currentPage - 1)}\n            disabled={currentPage === 1}\n            aria-label={t('table.pagination.previous')}\n          >\n            \n          </button>\n          \n          {pageNumbers.map((page, index) => (\n            page === 'ellipsis' ? (\n              <span key={`ellipsis-${index}`} className=\"dui-table-pagination-ellipsis\"></span>\n            ) : (\n              <button\n                key={page}\n                className={cn(\n                  'dui-table-pagination-btn',\n                  page === currentPage && 'dui-table-pagination-btn-active'\n                )}\n                onClick={() => onPageChange(page)}\n              >\n                {page}\n              </button>\n            )\n          ))}\n          \n          <button\n            className=\"dui-table-pagination-btn\"\n            onClick={() => onPageChange(currentPage + 1)}\n            disabled={currentPage === totalPages}\n            aria-label={t('table.pagination.next')}\n          >\n            \n          </button>\n          \n          <button\n            className=\"dui-table-pagination-btn\"\n            onClick={() => onPageChange(totalPages)}\n            disabled={currentPage === totalPages}\n            aria-label={t('table.pagination.last')}\n          >\n            \n          </button>\n        </nav>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// Selection Hook (simplified inline version)\n// ============================================================================\n\nfunction useSimpleSelection<T extends DataRecord>(\n  data: T[],\n  rowKeyProp: string | ((row: T) => string | number),\n  mode: 'single' | 'multiple',\n  initialSelection?: Array<string | number>,\n  onSelectionChange?: (ids: Array<string | number>) => void\n) {\n  // Internal state for uncontrolled mode\n  const [internalSelected, setInternalSelected] = useState<Set<string | number>>(new Set());\n\n  // Effective selection: use prop if provided, otherwise internal state\n  const selected = useMemo(() => {\n    if (initialSelection !== undefined) {\n      return new Set(initialSelection);\n    }\n    return internalSelected;\n  }, [initialSelection, internalSelected]);\n  \n  const getKey = useCallback((row: T): string | number => {\n    if (typeof rowKeyProp === 'function') {\n      return rowKeyProp(row);\n    }\n    return row[rowKeyProp] as string | number;\n  }, [rowKeyProp]);\n  \n  const isSelected = useCallback((key: string | number): boolean => {\n    return selected.has(key);\n  }, [selected]);\n\n  const updateSelection = useCallback((newSet: Set<string | number>) => {\n    // Only update internal state if we're uncontrolled\n    if (initialSelection === undefined) {\n      setInternalSelected(newSet);\n    }\n    // Always notify parent\n    if (onSelectionChange) {\n      onSelectionChange(Array.from(newSet));\n    }\n  }, [initialSelection, onSelectionChange]);\n  \n  const toggle = useCallback((key: string | number) => {\n    const next = new Set(selected);\n    if (mode === 'single') {\n      if (selected.has(key)) {\n        next.clear();\n      } else {\n        next.clear();\n        next.add(key);\n      }\n    } else {\n      if (selected.has(key)) {\n        next.delete(key);\n      } else {\n        next.add(key);\n      }\n    }\n    updateSelection(next);\n  }, [mode, selected, updateSelection]);\n  \n  const toggleAll = useCallback(() => {\n    let next: Set<string | number>;\n    if (selected.size === data.length) {\n      next = new Set();\n    } else {\n      next = new Set(data.map(getKey));\n    }\n    updateSelection(next);\n  }, [data, getKey, selected.size, updateSelection]);\n  \n  const clear = useCallback(() => {\n    updateSelection(new Set());\n  }, [updateSelection]);\n  \n  const selectedIds = useMemo(() => Array.from(selected), [selected]);\n  const isAllSelected = data.length > 0 && selected.size === data.length;\n  const isSomeSelected = selected.size > 0 && selected.size < data.length;\n  \n  return {\n    selectedIds,\n    isSelected,\n    isAllSelected,\n    isSomeSelected,\n    toggle,\n    toggleAll,\n    clear,\n  };\n}\n\n// ============================================================================\n// Main TableRenderer Component\n// ============================================================================\n\n/**\n * TableRenderer - A flexible, configurable data table component\n */\nfunction TableRendererInner<T extends DataRecord>(\n  props: TableRendererProps<T>,\n  ref: React.ForwardedRef<TableRendererRef>\n): JSX.Element {\n  const {\n    config,\n    data,\n    totalCount: externalTotalCount,\n    loading = false,\n    error = null,\n    page: externalPage,\n    pageSize: externalPageSize,\n    pageSizeOptions = [10, 25, 50, 100],\n    onPageChange,\n    onPageSizeChange,\n    onSortChange,\n    onFilterChange,\n    onRowClick,\n    onRowDoubleClick,\n    onSelectionChange,\n    selectedIds: externalSelectedIds,\n    rowKey = 'id',\n    className,\n    style,\n    renderEmpty = () => <DefaultEmptyState />,\n    renderLoading = () => <DefaultLoadingState />,\n    renderError = (err) => <DefaultErrorState error={err} />,\n    renderHeader,\n    renderRow,\n    renderActions,\n    stickyHeader = false,\n    maxHeight,\n    striped = false,\n    hoverable = true,\n    bordered = false,\n    compact = false,\n    selectable = false,\n    selectionMode = 'multiple',\n    showRowNumbers = false,\n    emptyValue = '',\n    isTreeTable,\n    expandedRowKeys: controlledExpandedKeys,\n    onToggleExpand,\n    renderSubRow,\n    theme = 'system',\n    preventLayoutShift = true,\n    featureFlags = {},\n    // Toolbar props\n    showToolbar = false,\n    showToolbarSearch = false,\n    toolbarSearchPlaceholder,\n    toolbarSearchValue = '',\n    onToolbarSearch,\n    showToolbarRefresh = false,\n    onToolbarRefresh,\n    showToolbarCreate = false,\n    toolbarCreateLabel,\n    onToolbarCreate,\n    showToolbarAdvancedSearch = false,\n    onToolbarAdvancedSearch,\n    toolbarDeleteLabel,\n    onToolbarDeleteSelected,\n    onToolbarToggleEnabled,\n    renderToolbarCustomContent,\n    // Handler to open Columns selector modal provided by page hook\n    onToolbarOpenColumns,\n    // whether prefs need sync (optional)\n    toolbarColumnsNeedsSync,\n    toolbarDisabled = false,\n    IconComponent,\n  } = props;\n  \n  const { t } = useI18n();\n  \n  // Internal state for uncontrolled mode\n  const [internalPage, setInternalPage] = useState(1);\n  const [internalPageSize, setInternalPageSize] = useState(\n    config.pagination?.pageSize ?? 10\n  );\n  const [sortState, setSortState] = useState<ColumnSortState | null>(null);\n  const [filters, setFilters] = useState<TableFilterState>({});\n  \n  // Determine controlled vs uncontrolled mode\n  const isPageControlled = externalPage !== undefined;\n  const currentPage = isPageControlled ? externalPage : internalPage;\n  const currentPageSize = externalPageSize ?? internalPageSize;\n  const totalCount = externalTotalCount ?? data.length;\n  const totalPages = Math.max(1, Math.ceil(totalCount / currentPageSize));\n  \n  // Get visible columns\n  const visibleColumns = useMemo(() => {\n    return config.columns.filter((col) => {\n      if (col.visible === false) return false;\n      if (!col.showWhen) return true;\n      // Note: In tables, we usually don't have a \"row\" context for the column itself \n      // unless it's per-row visibility, but here it's per-column visibility.\n      // We pass an empty record for formData since column showWhen usually depends on feature flags.\n      return evaluateConditions(col.showWhen, {}, featureFlags);\n    });\n  }, [config.columns, featureFlags]);\n  \n  // Row key getter\n  const getKey = useCallback((row: T): string | number => {\n    if (typeof rowKey === 'function') {\n      return rowKey(row);\n    }\n    return (row as DataRecord)[rowKey] as string | number;\n  }, [rowKey]);\n  \n  // Selection\n  const selection = useSimpleSelection(\n    data,\n    rowKey,\n    selectionMode,\n    externalSelectedIds,\n    onSelectionChange\n  );\n  \n  // Determine if we should show a status dot column (green circle)\n  // We check if any of the rows has one of the common status properties\n  const showStatusColumn = useMemo(() => {\n    return data.slice(0, 50).some(row => \n      (row as any).isEnabled !== undefined || \n      (row as any).active !== undefined || \n      (row as any).isActive !== undefined ||\n      (row as any).available !== undefined ||\n      (row as any).quantityAvailable !== undefined\n    );\n  }, [data]);\n  \n  // Expanded keys for tree table\n  const [internalExpandedKeys, setInternalExpandedKeys] = useState<Set<string | number>>(new Set());\n\n  // Handle page change\n  const handlePageChange = useCallback((newPage: number) => {\n    if (isPageControlled && onPageChange) {\n      onPageChange(newPage);\n    } else {\n      setInternalPage(newPage);\n    }\n  }, [isPageControlled, onPageChange]);\n  \n  // Handle page size change\n  const handlePageSizeChange = useCallback((newPageSize: number) => {\n    if (onPageSizeChange) {\n      onPageSizeChange(newPageSize);\n    }\n    setInternalPageSize(newPageSize);\n    handlePageChange(1);\n  }, [onPageSizeChange, handlePageChange]);\n  \n  // Handle sort change\n  const handleSortChange = useCallback((column: ColumnConfig) => {\n    if (!column.sortable) return;\n    \n    const newSort: ColumnSortState | null = sortState?.key === column.key\n      ? sortState.direction === 'asc'\n        ? { key: column.key, direction: 'desc' }\n        : sortState.direction === 'desc'\n          ? null\n          : { key: column.key, direction: 'asc' }\n      : { key: column.key, direction: 'asc' };\n    \n    setSortState(newSort);\n    if (onSortChange) {\n      onSortChange(newSort);\n    }\n  }, [sortState, onSortChange]);\n  \n  // Clear all filters\n  const clearFilters = useCallback(() => {\n    setFilters({});\n    if (onFilterChange) {\n      onFilterChange({});\n    }\n  }, [onFilterChange]);\n  \n  // Reset page\n  const resetPage = useCallback(() => {\n    handlePageChange(1);\n  }, [handlePageChange]);\n  \n  // Expose ref methods\n  useImperativeHandle(ref, () => ({\n    clearFilters,\n    clearSelection: selection.clear,\n    resetPage,\n    getFilters: () => filters,\n    getSelectedIds: () => selection.selectedIds\n  }), [clearFilters, selection.clear, resetPage, filters, selection.selectedIds]);\n  \n  // Apply client-side sorting (if no server-side handler provided) and pagination if not controlled\n  const processedData = useMemo(() => {\n    let working = [...data];\n\n    // If no server-side sorting handler is provided, apply client-side sort using sortState\n    if (!onSortChange && sortState) {\n      const col = config.columns.find(c => c.key === sortState.key);\n      if (col) {\n        const getSortValue = (row: T) => {\n          const v = getCellValue(row, col as ColumnConfig);\n          // Primitive numbers\n          if (typeof v === 'number') return v;\n          if (v == null) return '';\n          // Arrays -> join or use first element\n          if (Array.isArray(v)) {\n            return (v as any[]).map(it => (it && typeof it === 'object') ? (it.label ?? it.name ?? String(it)) : String(it)).join(' ');\n          }\n          if (typeof v === 'object') {\n            const obj = v as Record<string, any>;\n            return (obj.label ?? obj.name ?? obj.businessName ?? obj.value ?? JSON.stringify(obj));\n          }\n          return String(v).toLowerCase();\n        };\n\n        working.sort((a, b) => {\n          const av = getSortValue(a);\n          const bv = getSortValue(b);\n\n          if (typeof av === 'number' && typeof bv === 'number') {\n            return sortState.direction === 'asc' ? av - bv : bv - av;\n          }\n\n          return sortState.direction === 'asc'\n            ? String(av).localeCompare(String(bv))\n            : String(bv).localeCompare(String(av));\n        });\n      }\n    }\n\n    if (isPageControlled) return working;\n    const start = (currentPage - 1) * currentPageSize;\n    return working.slice(start, start + currentPageSize);\n  }, [data, isPageControlled, currentPage, currentPageSize, sortState, onSortChange, config.columns]);\n\n  // Expose the data we'll display in the table body (processedData may be paginated already)\n  const displayData = processedData;\n  \n  // Compute effective theme: when 'system', prefer document's Bootstrap attribute `data-bs-theme`, fall back to prefers-color-scheme\n  const effectiveTheme = (() => {\n    if (theme === 'dark') return 'dark';\n    if (theme === 'light') return 'light';\n    // theme === 'system'\n    if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n      const bs = document.documentElement.getAttribute('data-bs-theme');\n      if (bs === 'dark' || bs === 'light') return bs as 'dark' | 'light';\n      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    return 'light';\n  })();\n\n  // Column resize state & handlers\n  const [resizing, setResizing] = useState<{ key: string | null; startX: number; startWidth: number } | null>(null);\n\n  // --- Sticky Left Columns Calculation ---\n  const stickyLeftOffsets = useMemo(() => {\n    const offsets: Record<string, number> = {};\n    let currentOffset = 0;\n\n    // 1. Selection column\n    if (selectable) {\n      offsets['selection'] = currentOffset;\n      currentOffset += 48; // 3rem\n    }\n\n    // 2. Row numbers\n    if (showRowNumbers) {\n      offsets['rownum'] = currentOffset;\n      currentOffset += 48; // 3rem\n    }\n\n    // 3. Status column\n    if (showStatusColumn) {\n      offsets['status'] = currentOffset;\n      currentOffset += 40; // Synchronized with CSS 40px\n    }\n\n    // 4. First data column\n    if (visibleColumns.length > 0) {\n      const firstCol = visibleColumns[0];\n      offsets[String(firstCol.key)] = currentOffset;\n    }\n\n    return offsets;\n  }, [selectable, showRowNumbers, showStatusColumn, visibleColumns]);\n\n  const startColumnResize = useCallback((e: React.MouseEvent, key: string | number) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const el = (e.target as HTMLElement).closest('th') as HTMLElement | null;\n    if (!el) return;\n    const startWidth = el.getBoundingClientRect().width;\n    setResizing({ key: String(key), startX: (e as any).clientX, startWidth });\n  }, []);\n\n  // Ensure columns are resizable by default unless explicitly disabled\n  useEffect(() => {\n    try {\n      (config.columns as any[]).forEach((c: any) => {\n        if (c.resizable === undefined) c.resizable = true;\n      });\n    } catch (e) {\n      // ignore - defensive\n    }\n  }, [config.columns]);\n\n  // When resizing, we recompute table minimum width to allow table to grow\n  useEffect(() => {\n    if (!resizing) return;\n    const onMove = (ev: MouseEvent) => {\n      const dx = ev.clientX - (resizing.startX || 0);\n      let newWidth = Math.max(MIN_PX, Math.max(40, (resizing.startWidth || 0) + dx));\n\n      // store in config.columns _computedWidth for simplicity\n      (config.columns as any[]).forEach((c: any) => {\n        if (String(c.key) === resizing.key) c._computedWidth = `${newWidth}px`;\n      });\n\n      // Also expand table minWidth to the sum of columns to allow table expansion\n      try {\n        const sum = (config.columns as any[]).reduce((acc, c: any) => {\n          const w = parseWidthPx(c) ?? 120;\n          return acc + w;\n        }, 0);\n        if (tableElRef.current) {\n          tableElRef.current.style.minWidth = `${sum}px`;\n        }\n      } catch (e) {\n        // ignore\n      }\n\n      // Force re-render by updating state (trick: setResizing with same key)\n      setResizing(cur => cur ? { ...cur } : cur);\n    };\n    const onUp = () => {\n      // Persist widths to localStorage using table id\n      try {\n        const storageKey = `dn:col_widths:${config.id || 'table'}`;\n        const widths: Record<string, string> = {};\n        (config.columns as any[]).forEach((c: any) => {\n          if (c._computedWidth) widths[String(c.key)] = String(c._computedWidth);\n        });\n        localStorage.setItem(storageKey, JSON.stringify({ widths }));\n      } catch (e) {\n        // ignore storage errors\n      }\n      setResizing(null);\n    };\n    window.addEventListener('mousemove', onMove);\n    window.addEventListener('mouseup', onUp, { once: true });\n    return () => {\n      window.removeEventListener('mousemove', onMove);\n      window.removeEventListener('mouseup', onUp);\n    };\n  }, [resizing, config.columns]);\n\n\n  // On mount: restore column widths from localStorage if present\n  useEffect(() => {\n    try {\n      const storageKey = `dn:col_widths:${config.id || 'table'}`;\n      const raw = localStorage.getItem(storageKey);\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && parsed.widths) {\n          (config.columns as any[]).forEach((c: any) => {\n            if (parsed.widths[c.key]) c._computedWidth = parsed.widths[c.key];\n          });\n          // Trigger render\n          setResizing(cur => cur ? { ...cur } : cur);\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [config.id, config.columns]);\n\n  // Utility: parse computed width as number of pixels\n  const parseWidthPx = (col: any): number | null => {\n    const w = col._computedWidth ?? col.width;\n    if (w == null) return null;\n    if (typeof w === 'number') return w;\n    const str = String(w).trim();\n    const m = str.match(/^(\\d+)/);\n    if (m) return Number(m[1]);\n    return null;\n  };\n\n  // Minimum chars to display when shrunk; approximate px per char\n  const MIN_CHAR_DISPLAY = 6;\n  const CHAR_PX = 8; // heuristic\n  const MIN_PX = MIN_CHAR_DISPLAY * CHAR_PX;\n\n  // Table ref to allow expanding table width when user enlarges columns\n  const tableElRef = React.useRef<HTMLTableElement | null>(null);\n\n  // Render loading state\n  if (loading && data.length === 0) {\n    return (\n      <div className={cn('dui-table-container', effectiveTheme === 'dark' ? 'dui-theme--dark' : 'dui-theme--light', className)} style={style}>\n        {renderLoading()}\n      </div>\n    );\n  }\n  \n  // Render error state\n  if (error && data.length === 0) {\n    return (\n      <div className={cn('dui-table-container', effectiveTheme === 'dark' ? 'dui-theme--dark' : 'dui-theme--light', className)} style={style}>\n        {renderError(error)}\n      </div>\n    );\n  }\n  \n  // Calculate table classes\n  const tableClasses = cn(\n    'dui-table',\n    striped && 'dui-table-striped',\n    hoverable && 'dui-table-hoverable',\n    bordered && 'dui-table-bordered',\n    compact && 'dui-table-compact',\n    stickyHeader && 'dui-table-sticky-header'\n  );\n  \n  // Container styles\n  const containerStyle: CSSProperties = {\n    ...style,\n    ...(maxHeight ? { maxHeight, overflowY: 'auto' } : {})\n  };\n  \n  return (\n    <div className={cn('dui-table-container', effectiveTheme === 'dark' ? 'dui-theme--dark' : 'dui-theme--light', className)} style={containerStyle}>\n      {/* Toolbar */}\n      {showToolbar && (\n        <TableToolbar\n          showSearch={showToolbarSearch}\n          searchPlaceholder={toolbarSearchPlaceholder}\n          searchValue={toolbarSearchValue}\n          onSearch={onToolbarSearch}\n          showRefresh={showToolbarRefresh}\n          onRefresh={onToolbarRefresh}\n          showCreate={showToolbarCreate}\n          createLabel={typeof toolbarCreateLabel !== 'undefined' ? toolbarCreateLabel : (config && (config as any).toolbarCreateLabel)}\n          onCreate={onToolbarCreate}\n          showAdvancedSearch={showToolbarAdvancedSearch}\n          onAdvancedSearch={onToolbarAdvancedSearch}\n          selectedCount={selection.selectedIds.length}\n          onClearSelection={selection.clear}\n          onDeleteSelected={onToolbarDeleteSelected}\n          onToggleEnabled={onToolbarToggleEnabled}\n          deleteLabel={toolbarDeleteLabel}\n          renderCustomContent={renderToolbarCustomContent}\n          onOpenColumns={onToolbarOpenColumns}\n          showColumnsButton={Boolean(onToolbarOpenColumns)}\n          columnsNeedsSync={toolbarColumnsNeedsSync}\n          disabled={toolbarDisabled}\n          columns={config.columns}\n        />\n      )}\n      \n      <div className=\"dui-table-wrapper\" style={preventLayoutShift ? { scrollbarGutter: 'stable' as any } : {}}>\n        <table className={tableClasses}>\n          <thead className=\"dui-table-head\">\n            {renderHeader ? (\n              renderHeader(visibleColumns)\n            ) : (\n              <tr className=\"dui-table-row dui-table-header-row\">\n                {selectable && selectionMode === 'multiple' && (\n                  <th \n                    className={cn(\"dui-table-th dui-table-th-checkbox dui-table-sticky-left\", visibleColumns.length === 0 && !showRowNumbers && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                    style={{ left: stickyLeftOffsets['selection'], backgroundColor: 'var(--dui-table-header-bg)' }}\n                  >\n                    <Checkbox\n                      checked={selection.isAllSelected}\n                      indeterminate={selection.isSomeSelected && !selection.isAllSelected}\n                      onChange={() => selection.toggleAll()}\n                    />\n                  </th>\n                )}\n                \n                {selectable && selectionMode === 'single' && (\n                  <th \n                    className={cn(\"dui-table-th dui-table-th-radio dui-table-sticky-left\", visibleColumns.length === 0 && !showRowNumbers && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                    style={{ left: stickyLeftOffsets['selection'], backgroundColor: 'var(--dui-table-header-bg)' }}\n                  />\n                )}\n                \n                {showRowNumbers && (\n                  <th \n                    className={cn(\"dui-table-th dui-table-th-rownum dui-table-sticky-left\", visibleColumns.length === 0 && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                    style={{ left: stickyLeftOffsets['rownum'], backgroundColor: 'var(--dui-table-header-bg)' }}\n                  >#</th>\n                )}\n                \n                {showStatusColumn && (\n                  <th \n                    className={cn(\"dui-table-th dui-table-th-status dui-table-sticky-left\", visibleColumns.length === 0 && \"dui-table-sticky-left-last\")}\n                    style={{ width: '2.5rem', textAlign: 'center', left: stickyLeftOffsets['status'], backgroundColor: 'var(--dui-table-header-bg)' }} \n                  />\n                )}\n                \n                {visibleColumns.map((column, index) => {\n                  const isActionsCol = column.key === 'actions' || (column as any).type === 'actions' || (column as any).dataType === 'actions';\n                  const isFirstDataCol = index === 0;\n                  \n                  return (\n                    <th\n                      key={column.key}\n                      className={cn(\n                        'dui-table-th',\n                        column.sortable && 'dui-table-th-sortable',\n                        column.align && `dui-table-th-${column.align}`,\n                        isActionsCol && 'dui-table-th-actions',\n                        isFirstDataCol && 'dui-table-sticky-left dui-table-sticky-left-last'\n                      )}\n                      style={{\n                        width: (column as any)._computedWidth ?? column.width,\n                        minWidth: column.minWidth ?? `${MIN_PX}px`,\n                        maxWidth: column.maxWidth,\n                        backgroundColor: (isActionsCol || isFirstDataCol) ? 'var(--dui-table-header-bg)' : undefined,\n                        left: isFirstDataCol ? stickyLeftOffsets[String(column.key)] : undefined,\n                        zIndex: (isFirstDataCol || isActionsCol) ? 15 : undefined\n                      }}\n                      onClick={() => column.sortable && handleSortChange(column)}\n                    >\n                    <div className=\"dui-table-th-content\">\n                      <span className=\"dui-table-th-text\">{(function getColumnLabel() {\n                        const headerStr = typeof column.header === 'string' ? column.header : '';\n                        // Prefer explicit translations for the column key\n                        const tByKey = t(`columns.labels.${String(column.key)}`);\n                        if (tByKey && tByKey !== `columns.labels.${String(column.key)}`) return tByKey;\n                        // Otherwise resolve label from header or humanize\n                        return resolveLabel(headerStr || String(column.key));\n                      })()}</span>\n                      {column.sortable && (\n                        <SortIndicator \n                          direction={sortState?.key === column.key ? sortState.direction : null} \n                        />\n                      )}\n                    </div>\n\n                    {/* Resize handle */}\n                    {column.resizable && (\n                      <div\n                        className=\"dui-table-th-resize-handle\"\n                        onMouseDown={(e) => startColumnResize(e, column.key)}\n                        style={{ position: 'absolute', top: 0, right: 0, bottom: 0, width: 8, cursor: 'col-resize' }}\n                        role=\"separator\"\n                        aria-orientation=\"horizontal\"\n                      />\n                    )}\n                  </th>\n                );\n              })}                \n                {renderActions && (\n                  <th className=\"dui-table-th dui-table-th-actions\" style={{ backgroundColor: 'var(--dui-table-header-bg)' }}>\n                    {t('table.actions')}\n                  </th>\n                )}\n              </tr>\n            )}\n          </thead>\n          \n          <tbody className=\"dui-table-body\">\n            {displayData.length === 0 ? (\n              <tr>\n                <td \n                  colSpan={\n                    visibleColumns.length + \n                    (selectable ? 1 : 0) + \n                    (showRowNumbers ? 1 : 0) + \n                    (showStatusColumn ? 1 : 0) + \n                    (renderActions ? 1 : 0) +\n                    (isTreeTable ? 1 : 0)\n                  }\n                  className=\"dui-table-td-empty\"\n                >\n                  {renderEmpty()}\n                </td>\n              </tr>\n            ) : (\n              displayData.map((row, index) => {\n                const key = getKey(row);\n                const rowIndex = (currentPage - 1) * currentPageSize + index;\n                const isRowSelected = selectable && selection.isSelected(key);\n                const isExpanded = controlledExpandedKeys? controlledExpandedKeys.includes(key) : internalExpandedKeys.has(key);\n                const isChild = !!(row as any).parentId;\n                \n                if (renderRow) {\n                  return renderRow(row, rowIndex, visibleColumns);\n                }\n                \n                const toggleExpand = (e: React.MouseEvent) => {\n                  e.stopPropagation();\n                  const nextExpanded = !isExpanded;\n                  if (!controlledExpandedKeys) {\n                    const next = new Set(internalExpandedKeys);\n                    if (nextExpanded) next.add(key);\n                    else next.delete(key);\n                    setInternalExpandedKeys(next);\n                  }\n                  onToggleExpand?.(row, nextExpanded);\n                };\n\n                return (\n                  <React.Fragment key={key}>\n                    <tr\n                      className={cn(\n                        'dui-table-row',\n                        isRowSelected && 'dui-table-row-selected',\n                        onRowClick && 'dui-table-row-clickable',\n                        isChild && 'dui-table-row-child'\n                      )}\n                      onClick={(e) => {\n                        if ((e as React.MouseEvent).button !== 0) return;\n                        onRowClick?.(row, rowIndex);\n                      }}\n                      onDoubleClick={(e) => {\n                        if ((e as React.MouseEvent).button !== 0) return;\n                        onRowDoubleClick?.(row, rowIndex);\n                      }}\n                      onContextMenu={(e) => { e.stopPropagation(); }}\n                    >\n                      {isTreeTable && (\n                        <td className=\"dui-table-td dui-table-td-tree-toggle\" onClick={(e) => e.stopPropagation()}>\n                          {((row as any).hasChildren || (row as any).isVariable || (row as any).children?.length > 0) && (\n                            <button type=\"button\" onClick={toggleExpand} className=\"dui-table-tree-btn\">\n                              <span className={cn('dui-table-tree-icon', isExpanded && 'dui-table-tree-icon--expanded')}>\n                                {IconComponent ? <IconComponent name=\"chevron-right\" /> : (isExpanded ? '' : '')}\n                              </span>\n                            </button>\n                          )}\n                        </td>\n                      )}\n\n                      {selectable && selectionMode === 'multiple' && (\n                        <td \n                          className={cn(\"dui-table-td dui-table-td-checkbox dui-table-sticky-left\", visibleColumns.length === 0 && !showRowNumbers && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                          style={{ left: stickyLeftOffsets['selection'], backgroundColor: 'inherit' }}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <Checkbox\n                              checked={isRowSelected}\n                              onChange={() => selection.toggle(key)}\n                            />\n                          </div>\n                        </td>\n                      )}\n                      \n                      {selectable && selectionMode === 'single' && (\n                        <td \n                          className={cn(\"dui-table-td dui-table-td-radio dui-table-sticky-left\", visibleColumns.length === 0 && !showRowNumbers && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                          style={{ left: stickyLeftOffsets['selection'], backgroundColor: 'inherit' }}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <input\n                              type=\"radio\"\n                              className=\"dui-table-radio\"\n                              checked={isRowSelected}\n                              onChange={() => selection.toggle(key)}\n                            />\n                          </div>\n                        </td>\n                      )}\n                      \n                      {showRowNumbers && (\n                        <td \n                          className={cn(\"dui-table-td dui-table-td-rownum dui-table-sticky-left\", visibleColumns.length === 0 && !showStatusColumn && \"dui-table-sticky-left-last\")}\n                          style={{ left: stickyLeftOffsets['rownum'], backgroundColor: 'inherit' }}\n                        >\n                          {rowIndex + 1}\n                        </td>\n                      )}\n                      \n                      {showStatusColumn && (\n                        <td \n                          className={cn(\"dui-table-td dui-table-td-status dui-table-sticky-left\", visibleColumns.length === 0 && \"dui-table-sticky-left-last\")}\n                          style={{ textAlign: 'center', width: '2.5rem', left: stickyLeftOffsets['status'], backgroundColor: 'inherit' }} \n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          {(function renderStatusDot() {\n                            const active = (row as any).isEnabled ?? (row as any).active ?? (row as any).isActive ?? (row as any).available ?? ((row as any).quantityAvailable !== undefined ? (row as any).quantityAvailable > 0 : undefined);\n                            if (active === undefined) return null;\n                            return (\n                              <span \n                                className={cn(\n                                  'dui-table-status-dot',\n                                  active ? 'dui-table-status-dot--active' : 'dui-table-status-dot--inactive'\n                                )}\n                                title={active ? t('common.active', { default: 'Activo' }) : t('common.inactive', { default: 'Inactivo' })}\n                                style={{ marginLeft: 0 }}\n                              />\n                            );\n                          })()}\n                        </td>\n                      )}\n                      \n                      {visibleColumns.map((column, colIndex) => {\n                        const isFirstDataCol = colIndex === 0;\n                        if ((column as any).type === 'actions' || (column as any).dataType === 'actions') {\n                          const actions = (column as any).actions || [];\n\n                          return (\n                            <td\n                              key={column.key}\n                              className={cn(\n                                'dui-table-td',\n                                column.align && `dui-table-td-${column.align}`,\n                                'dui-table-td-actions'\n                              )}\n                              style={{\n                                width: column.width,\n                                minWidth: column.minWidth,\n                                maxWidth: column.maxWidth,\n                                backgroundColor: 'var(--dui-table-bg)',\n                                position: 'sticky',\n                                right: 0,\n                                zIndex: 5\n                              }}\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              <div style={{ \n                                display: 'flex', \n                                gap: 8, \n                                justifyContent: column.align === 'center' ? 'center' : (column.align === 'right' ? 'flex-end' : undefined) \n                              }}>\n                                {actions.map((action: any) => {\n                                  let renderedIcon: React.ReactNode = action.icon;\n                                  \n                                  if (typeof action.icon === 'string') {\n                                    if (IconComponent) {\n                                      renderedIcon = <IconComponent name={action.icon} className=\"w-4 h-4\" />;\n                                    }\n                                  }\n\n                                    const getVariantClass = (v?: string) => {\n                                      if (!v) return 'btn-ghost';\n                                      if (v.includes('ghost')) return `btn-${v}`;\n                                      if (v.includes('outline')) return `btn-${v}`;\n                                      if (v === 'info' || v === 'primary') return 'btn-ghost text-primary';\n                                      if (v === 'warning') return 'btn-ghost text-warning';\n                                      if (v === 'danger') return 'btn-ghost text-danger';\n                                      return `btn-ghost text-${v}`;\n                                    };\n\n                                    return (\n                                      <button\n                                        key={action.id}\n                                        type=\"button\"\n                                        title={typeof action.label === 'string' ? resolveLabel(action.label) : undefined}\n                                        className={`btn btn-sm ${getVariantClass(action.variant)}`}\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          action.onClick?.(row, rowIndex);\n                                        }}\n                                      >\n                                        {renderedIcon ? renderedIcon : (typeof action.label === 'string' ? resolveLabel(action.label) : action.label)}\n                                      </button>\n                                    );\n                                })}\n                              </div>\n                            </td>\n                          );\n                        }\n\n                        const value = getCellValue(row, column);\n                        const formattedValue = formatCellValue(\n                          value, \n                          column as ColumnConfig<T>, \n                          row, \n                          emptyValue\n                        );\n                        \n                        return (\n                          <td\n                            key={column.key}\n                            className={cn(\n                              'dui-table-td',\n                              column.align && `dui-table-td-${column.align}`,\n                              isFirstDataCol && 'dui-table-sticky-left dui-table-sticky-left-last'\n                            )}\n                            style={{\n                              width: column.width,\n                              minWidth: column.minWidth,\n                              maxWidth: column.maxWidth,\n                              left: isFirstDataCol ? stickyLeftOffsets[String(column.key)] : undefined,\n                              backgroundColor: isFirstDataCol ? 'inherit' : undefined,\n                              paddingLeft: isFirstDataCol && isChild ? '2rem' : undefined\n                            }}\n                          >\n                            {formattedValue}\n                          </td>\n                        );\n                      })}\n                      \n                      {renderActions && (\n                        <td \n                          className=\"dui-table-td dui-table-td-actions\"\n                          style={{ backgroundColor: 'var(--dui-table-bg)' }}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          {renderActions(row, rowIndex)}\n                        </td>\n                      )}\n                    </tr>\n                    \n                    {isExpanded && renderSubRow && (\n                      <tr className=\"dui-table-row-sub\">\n                        <td colSpan={visibleColumns.length + (selectable ? 1 : 0) + (showRowNumbers ? 1 : 0) + (showStatusColumn ? 1 : 0) + (renderActions ? 1 : 0) + (isTreeTable ? 1 : 0)}>\n                          <div className=\"dui-table-subrow-content\">\n                            {renderSubRow(row)}\n                          </div>\n                        </td>\n                      </tr>\n                    )}\n\n                    {isExpanded && (row as any).children && (row as any).children.map((child: any, childIdx: number) => {\n                       // Recursively render child rows if needed, but for now flat children with indentation handles it\n                       // Actually better if displayData is ALREADY flattened or if we handle nested here.\n                       // For simplicity with server-side pagination, we'll assume children are nested in the parent object.\n                       return null; // For now handled by ProductsPage inserting them into the list or using renderSubRow\n                    })}\n                  </React.Fragment>\n                );\n              })\n            )}\n          </tbody>\n\n        </table>\n      </div>\n      \n      {loading && data.length > 0 && (\n        <div className=\"dui-table-loading-overlay\">\n          <div className=\"dui-table-loading-spinner\" />\n        </div>\n      )}\n      \n      {config.pagination?.enabled !== false && totalPages > 0 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          pageSize={currentPageSize}\n          totalCount={totalCount}\n          pageSizeOptions={pageSizeOptions}\n          onPageChange={handlePageChange}\n          onPageSizeChange={handlePageSizeChange}\n        />\n      )}\n    </div>\n  );\n}\n\n/**\n * TableRenderer with forwardRef support\n */\nexport const TableRenderer = forwardRef(TableRendererInner) as <T extends DataRecord>(\n  props: TableRendererProps<T> & { ref?: React.ForwardedRef<TableRendererRef> }\n) => JSX.Element;\n\n(TableRenderer as React.FC).displayName = 'TableRenderer';\n\nexport default TableRenderer;\n","import React from 'react';\nimport { cn } from '../core/utils';\nimport { resolveLabel } from '../i18n/I18n';\n\nexport interface TabItem {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  disabled?: boolean;\n}\n\nexport interface TabRendererProps {\n  tabs: TabItem[];\n  activeTab: string;\n  onChange: (tabId: string) => void;\n  className?: string;\n  variant?: 'underline' | 'pills' | 'ghost';\n}\n\nexport const TabRenderer: React.FC<TabRendererProps> = ({\n  tabs,\n  activeTab,\n  onChange,\n  className,\n  variant = 'underline'\n}) => {\n  return (\n    <div className={cn('dui-tabs-container', className)}>\n      <div className={cn(\n        'flex items-center gap-1 border-b dark:border-gray-700',\n        variant === 'pills' && 'border-none gap-2'\n      )}>\n        {tabs.map((tab) => {\n          const isActive = tab.id === activeTab;\n          \n          if (variant === 'pills') {\n            return (\n              <button\n                key={tab.id}\n                type=\"button\"\n                onClick={() => !tab.disabled && onChange(tab.id)}\n                disabled={tab.disabled}\n                className={cn(\n                  'flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200',\n                  isActive\n                    ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30'\n                    : 'text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 dark:text-gray-400',\n                  tab.disabled && 'opacity-50 cursor-not-allowed'\n                )}\n              >\n                {tab.icon && <span className=\"text-lg\">{tab.icon}</span>}\n                <span>{resolveLabel(tab.label)}</span>\n              </button>\n            );\n          }\n\n          // Default: underline\n          return (\n            <button\n              key={tab.id}\n              type=\"button\"\n              onClick={() => !tab.disabled && onChange(tab.id)}\n              disabled={tab.disabled}\n              className={cn(\n                'relative flex items-center gap-2 px-6 py-4 text-sm font-semibold transition-all duration-200 focus:outline-none',\n                isActive\n                  ? 'text-blue-600 dark:text-blue-400'\n                  : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200',\n                tab.disabled && 'opacity-50 cursor-not-allowed'\n              )}\n            >\n              {tab.icon && <span className=\"text-lg\">{tab.icon}</span>}\n              <span>{resolveLabel(tab.label)}</span>\n              \n              {isActive && (\n                <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400 rounded-t-full shadow-[0_-2px_10px_rgba(37,99,235,0.5)]\" />\n              )}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","/**\n * @fileoverview FormRenderer Component\n * \n * Renders dynamic forms based on JSON configuration with support for:\n * - Grouped sections with collapsible headers\n * - Conditional field visibility\n * - Computed field values\n * - Inline validation\n * - Grid-based layouts\n * \n * @module components/FormRenderer\n */\n\nimport React, { \n  forwardRef, \n  useImperativeHandle, \n  useCallback,\n  useState,\n  useMemo,\n  useEffect,\n} from 'react';\nimport type { \n  FormConfig, \n  FormSection as FormSectionConfig,\n  TabConfig,\n  FieldConfig, \n  FieldValue, \n  DataRecord,\n} from '../core/types';\nimport { cn, getNestedValue } from '../core/utils';\nimport { useI18n, resolveLabel, t } from '../i18n/I18n';\nimport { evaluateConditions, validateField as coreValidateField } from '../core/validators';\nimport { TabRenderer } from './TabRenderer';\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\n/**\n * Form values type\n */\nexport type FormValues = Record<string, FieldValue>;\n\n/**\n * Form errors type\n */\nexport type FormErrors = Record<string, string | undefined>;\n\n/**\n * Form touched state type\n */\nexport type FormTouched = Record<string, boolean>;\n\n/**\n * Field render props passed to renderField\n */\nexport interface FieldRenderProps {\n  /** Field configuration */\n  field: FieldConfig;\n  /** Current field value */\n  value: FieldValue;\n  /** All form values */\n  formData: FormValues;\n  /** Field error message */\n  error?: string;\n  /** Whether field has been touched */\n  touched: boolean;\n  /** Whether field is disabled */\n  disabled: boolean;\n  /** Whether field is read-only */\n  readOnly: boolean;\n  /** Handle value change */\n  onChange: (value: FieldValue) => void;\n  /** Handle field blur */\n  onBlur: () => void;\n}\n\n/**\n * Section render props\n */\nexport interface SectionRenderProps {\n  /** Section configuration */\n  section: FormSectionConfig;\n  /** Whether section is collapsed */\n  isCollapsed: boolean;\n  /** Toggle collapse */\n  toggleCollapse: () => void;\n  /** Rendered field elements */\n  children: React.ReactNode;\n}\n\n/**\n * FormRenderer props\n */\nexport interface FormRendererProps<T extends DataRecord = DataRecord> {\n  /** Form configuration from JSON */\n  config: FormConfig;\n  /** Current form values (controlled mode) */\n  values?: T;\n  /** Initial values (uncontrolled mode) */\n  initialValues?: T;\n  /** Validation errors from parent */\n  errors?: FormErrors;\n  /** Form submit handler */\n  onSubmit?: (values: T) => void | Promise<void>;\n  /** Form cancel handler */\n  onCancel?: () => void;\n  /** Field value change handler */\n  onChange?: (name: string, value: FieldValue, values: T) => void;\n  /** Field blur handler */\n  onBlur?: (name: string) => void;\n  /** Validation error callback */\n  onValidationError?: (errors: FormErrors) => void;\n  /** Whether form is loading/submitting */\n  loading?: boolean;\n  /** Whether form is disabled */\n  disabled?: boolean;\n  /** Whether form is read-only */\n  readOnly?: boolean;\n  /** Custom field renderer */\n  renderField?: (props: FieldRenderProps) => React.ReactNode;\n  /** Custom section renderer */\n  renderSection?: (props: SectionRenderProps) => React.ReactNode;\n  /** Feature flags for conditional rendering */\n  featureFlags?: Record<string, boolean>;\n  /** Additional class name */\n  className?: string;\n  /** Hide form buttons */\n  hideButtons?: boolean;\n  /** Custom footer content */\n  footer?: React.ReactNode;\n  /** Custom header content */\n  header?: React.ReactNode;\n}\n\n/**\n * FormRenderer ref interface\n */\nexport interface FormRendererRef<T extends DataRecord = DataRecord> {\n  /** Get current form values */\n  getValues: () => T;\n  /** Set form values */\n  setValues: (values: Partial<T>) => void;\n  /** Set a single field value */\n  setValue: (name: string, value: FieldValue) => void;\n  /** Validate all fields */\n  validate: () => boolean;\n  /** Reset form to initial values */\n  reset: () => void;\n  /** Get validation errors */\n  getErrors: () => FormErrors;\n  /** Check if form is dirty */\n  isDirty: () => boolean;\n  /** Submit the form programmatically */\n  submit: () => Promise<void>;\n}\n\n// =============================================================================\n// DEFAULT FIELD RENDERER\n// =============================================================================\n\n/**\n * Default field renderer component\n */\nfunction DefaultFieldRenderer({ \n  field, \n  value, \n  error, \n  touched, \n  disabled,\n  readOnly,\n  onChange, \n  onBlur,\n}: FieldRenderProps): React.ReactElement {\n  const { t } = useI18n();\n  \n  const inputId = `field-${field.name}`;\n  const hasError = touched && !!error;\n\n  // Determine input type based on field type\n  const getInputType = (): string => {\n    switch (field.type) {\n      case 'email': return 'email';\n      case 'password': return 'password';\n      case 'number':\n      case 'currency':\n      case 'percent': return 'number';\n      case 'date': return 'date';\n      case 'datetime': return 'datetime-local';\n      case 'time': return 'time';\n      case 'url': return 'url';\n      case 'phone': return 'tel';\n      case 'color': return 'color';\n      case 'range': return 'range';\n      case 'hidden': return 'hidden';\n      default: return 'text';\n    }\n  };\n\n  // Render select field\n  if (field.type === 'select' || field.type === 'multiselect') {\n    return (\n      <div className={cn('dui-field', hasError && 'dui-field--error')}>\n        <label htmlFor={inputId} className=\"dui-field__label\">\n          {resolveLabel(String(field.label))}\n          {field.required && <span className=\"dui-field__required\">*</span>}\n        </label>\n        <select\n          id={inputId}\n          name={field.name}\n          value={value as string || ''}\n          onChange={(e) => onChange(e.target.value)}\n          onBlur={onBlur}\n          disabled={disabled || field.disabled}\n          className=\"dui-field__select\"\n          multiple={field.type === 'multiselect'}\n        >\n          {!field.required && <option value=\"\">{resolveLabel('select_placeholder','Select...')}</option>}\n          {field.options?.map((option) => (\n            <option \n              key={String(option.value)} \n              value={String(option.value)}\n              disabled={option.disabled}\n            >\n              {resolveLabel(String(option.label))}\n            </option>\n          ))}\n        </select>\n        {field.helpText && <p className=\"dui-field__help\">{field.helpText}</p>}\n        {hasError && <p className=\"dui-field__error\">{error}</p>}\n      </div>\n    );\n  }\n\n  // Render checkbox/switch field\n  if (field.type === 'checkbox' || field.type === 'switch') {\n    return (\n      <div className={cn('dui-field dui-field--checkbox', hasError && 'dui-field--error')}>\n        <label className=\"dui-field__checkbox-label\">\n          <input\n            type=\"checkbox\"\n            id={inputId}\n            name={field.name}\n            checked={Boolean(value)}\n            onChange={(e) => onChange(e.target.checked)}\n            onBlur={onBlur}\n            disabled={disabled || field.disabled}\n            className={field.type === 'switch' ? 'dui-field__switch' : 'dui-field__checkbox'}\n          />\n          <span>{resolveLabel(String(field.label))}</span>\n          {field.required && <span className=\"dui-field__required\">*</span>}\n        </label>\n        {field.helpText && <p className=\"dui-field__help\">{resolveLabel(String(field.helpText))}</p>}\n        {hasError && <p className=\"dui-field__error\">{error}</p>}\n      </div>\n    );\n  }\n\n  // Render textarea field\n  if (field.type === 'textarea') {\n    return (\n      <div className={cn('dui-field', hasError && 'dui-field--error')}>\n        <label htmlFor={inputId} className=\"dui-field__label\">\n          {resolveLabel(String(field.label))}\n          {field.required && <span className=\"dui-field__required\">*</span>}\n        </label>\n        <textarea\n          id={inputId}\n          name={field.name}\n          value={value as string || ''}\n          onChange={(e) => onChange(e.target.value)}\n          onBlur={onBlur}\n          disabled={disabled || field.disabled}\n          readOnly={readOnly || field.readOnly}\n          placeholder={field.placeholder ? resolveLabel(String(field.placeholder)) : undefined}\n          maxLength={field.maxLength}\n          className=\"dui-field__textarea\"\n          rows={4}\n        />\n        {field.helpText && <p className=\"dui-field__help\">{resolveLabel(String(field.helpText))}</p>}\n        {hasError && <p className=\"dui-field__error\">{error}</p>}\n      </div>\n    );\n  }\n\n  // Render radio group\n  if (field.type === 'radio') {\n    return (\n      <div className={cn('dui-field', hasError && 'dui-field--error')}>\n        <span className=\"dui-field__label\">\n          {resolveLabel(String(field.label))}\n          {field.required && <span className=\"dui-field__required\">*</span>}\n        </span>\n        <div className={cn(\n          \"dui-field__radio-group\",\n          field.layout === 'horizontal' && \"dui-field__radio-group--horizontal\",\n          field.layout === 'vertical' && \"dui-field__radio-group--vertical\"\n        )}>\n          {field.options?.map((option) => (\n            <label key={String(option.value)} className=\"dui-field__radio-label\">\n              <input\n                type=\"radio\"\n                name={field.name}\n                value={String(option.value)}\n                checked={value === option.value}\n                onChange={(e) => onChange(e.target.value)}\n                onBlur={onBlur}\n                disabled={disabled || field.disabled || option.disabled}\n                className=\"dui-field__radio\"\n              />\n              <span>{resolveLabel(String(option.label))}</span>\n            </label>\n          ))}\n        </div>\n        {field.helpText && <p className=\"dui-field__help\">{resolveLabel(String(field.helpText))}</p>}\n        {hasError && <p className=\"dui-field__error\">{error}</p>}\n      </div>\n    );\n  }\n\n  // Default: render input field\n\n  // Apply optional display formatting when field is read-only / computed\n  let displayValue: string | number | undefined = value as string | number | undefined;\n  \n  // Transform date/datetime values to HTML input format\n  if ((field.type === 'date' || field.type === 'datetime' || field.type === 'time') && value) {\n    try {\n      const date = new Date(value as string);\n      if (!isNaN(date.getTime())) {\n        switch (field.type) {\n          case 'date':\n            displayValue = date.toISOString().split('T')[0];\n            break;\n          case 'datetime':\n            displayValue = date.toISOString().slice(0, 16);\n            break;\n          case 'time':\n            displayValue = date.toTimeString().slice(0, 5);\n            break;\n        }\n      }\n    } catch {\n      // Keep original value if parsing fails\n    }\n  }\n  \n  const shouldFormat = typeof value === 'number' && (readOnly || field.readOnly || !!field.computed) && field.format && typeof field.format.toFixed === 'number';\n  if (shouldFormat) {\n    try {\n      displayValue = (value as number).toFixed(field.format!.toFixed!);\n    } catch {\n      displayValue = value as number;\n    }\n  }\n\n  return (\n    <div className={cn('dui-field', hasError && 'dui-field--error')}>\n      <label htmlFor={inputId} className=\"dui-field__label\">\n        {resolveLabel(String(field.label))}\n        {field.required && <span className=\"dui-field__required\">*</span>}\n      </label>\n      <input\n        type={getInputType()}\n        id={inputId}\n        name={field.name}\n        value={displayValue as string | number || ''}\n        onChange={(e) => {\n          let newValue: any = e.target.value;\n          \n          // Transform date/time inputs back to ISO format\n          if ((field.type === 'date' || field.type === 'datetime' || field.type === 'time') && newValue) {\n            try {\n              if (field.type === 'date') {\n                newValue = new Date(newValue + 'T00:00:00').toISOString();\n              } else if (field.type === 'datetime') {\n                newValue = new Date(newValue).toISOString();\n              } else if (field.type === 'time') {\n                // Keep time as-is\n                newValue = newValue;\n              }\n            } catch {\n              // Keep original value if parsing fails\n            }\n          } else if (field.type === 'number' || field.type === 'currency' || field.type === 'percent') {\n            newValue = newValue === '' ? undefined : parseFloat(newValue);\n          }\n          \n          onChange(newValue);\n        }}\n        onBlur={onBlur}\n        disabled={disabled || field.disabled}\n        readOnly={readOnly || field.readOnly}\n        placeholder={field.placeholder ? resolveLabel(String(field.placeholder)) : undefined}\n        min={field.min}\n        max={field.max}\n        maxLength={field.maxLength}\n        className=\"dui-field__input\"\n      />\n      {field.helpText && <p className=\"dui-field__help\">{resolveLabel(String(field.helpText))}</p>}\n      {hasError && <p className=\"dui-field__error\">{error}</p>}\n    </div>\n  );\n}\n\n// =============================================================================\n// DEFAULT SECTION RENDERER\n// =============================================================================\n\n/**\n * Default section renderer component\n */\nfunction DefaultSectionRenderer({\n  section,\n  isCollapsed,\n  toggleCollapse,\n  children,\n}: SectionRenderProps): React.ReactElement {\n  return (\n    <div className=\"dui-form-section\">\n      <div \n        className={cn(\n          'dui-form-section__header',\n          section.collapsible && 'dui-form-section__header--collapsible'\n        )}\n        onClick={section.collapsible ? toggleCollapse : undefined}\n      >\n        {section.icon && (\n          <span className=\"dui-form-section__icon\">{section.icon}</span>\n        )}\n        <div className=\"dui-form-section__title-group\">\n          <h3 className=\"dui-form-section__title\">{typeof section.title === 'string' ? resolveLabel(section.title) : section.title}</h3>\n          {section.description && (\n            <p className=\"dui-form-section__description\">{typeof section.description === 'string' ? resolveLabel(section.description) : section.description}</p>\n          )}\n        </div>\n        {section.collapsible && (\n          <span className={cn(\n            'dui-form-section__collapse-icon',\n            isCollapsed && 'dui-form-section__collapse-icon--collapsed'\n          )}>\n            \n          </span>\n        )}\n      </div>\n      {!isCollapsed && (\n        <div \n          className=\"dui-form-section__content\"\n          style={{\n            display: 'grid',\n            gridTemplateColumns: `repeat(${section.columns || 1}, minmax(0, 1fr))`,\n            gap: '1rem',\n          }}\n        >\n          {children}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// =============================================================================\n// FORM RENDERER COMPONENT\n// =============================================================================\n\n/**\n * FormRenderer component\n * \n * Renders a dynamic form based on JSON configuration.\n * \n * @example\n * ```tsx\n * <FormRenderer\n *   config={formConfig}\n *   values={formData}\n *   onChange={(name, value, allValues) => setFormData(allValues)}\n *   onSubmit={(values) => saveData(values)}\n *   onCancel={() => router.back()}\n * />\n * ```\n */\nfunction FormRendererInner<T extends DataRecord = DataRecord>(\n  props: FormRendererProps<T>,\n  ref: React.ForwardedRef<FormRendererRef<T>>\n): React.ReactElement {\n  const {\n    config,\n    values: controlledValues,\n    initialValues = {} as T,\n    errors: controlledErrors,\n    onSubmit,\n    onCancel,\n    onChange,\n    onBlur,\n    onValidationError,\n    loading = false,\n    disabled = false,\n    readOnly = false,\n    renderField: customRenderField,\n    renderSection: customRenderSection,\n    featureFlags = {},\n    className,\n    hideButtons = false,\n    footer,\n    header,\n  } = props;\n\n  const { t } = useI18n();\n\n  // Internal state for uncontrolled mode\n  const [internalValues, setInternalValues] = useState<T>(initialValues);\n  const [internalErrors, setInternalErrors] = useState<FormErrors>({});\n  const [touched, setTouched] = useState<FormTouched>({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Active tab state\n  const [activeTab, setActiveTab] = useState<string>(() => {\n    if (config.tabs && config.tabs.length > 0) {\n      return config.tabs[0].id;\n    }\n    return '';\n  });\n\n  // Collapsed sections state\n  const [collapsedSections, setCollapsedSections] = useState<Set<string>>(() => {\n    const initial = new Set<string>();\n    (config.sections || []).forEach((section) => {\n      if (section.defaultCollapsed) {\n        initial.add(section.id);\n      }\n    });\n    return initial;\n  });\n\n  // Determine if controlled or uncontrolled\n  const isControlled = controlledValues !== undefined;\n  const values = isControlled ? controlledValues : internalValues;\n  const errors = controlledErrors || internalErrors;\n\n  // Store initial values for dirty check\n  const initialValuesRef = React.useRef(initialValues);\n\n  // ==========================================================================\n  // HELPER FUNCTIONS\n  // ==========================================================================\n\n  /**\n   * Check if a field should be visible based on showWhen conditions\n   */\n  const isFieldVisible = useCallback((field: FieldConfig): boolean => {\n    if (field.type === 'hidden') return false;\n    if (!field.showWhen) return true;\n    return evaluateConditions(field.showWhen as any, values as DataRecord, featureFlags);\n  }, [values, featureFlags]);\n\n  /**\n   * Check if a section should be visible\n   */\n  const isSectionVisible = useCallback((section: FormSectionConfig): boolean => {\n    if (!section.showWhen) return true;\n    return evaluateConditions(section.showWhen as any, values as DataRecord, featureFlags);\n  }, [values, featureFlags]);\n\n  /**\n   * Check if a tab should be visible\n   */\n  const isTabVisible = useCallback((tab: TabConfig): boolean => {\n    if (!tab.showWhen) return true;\n    return evaluateConditions(tab.showWhen as any, values as DataRecord, featureFlags);\n  }, [values, featureFlags]);\n\n  /**\n   * Get computed value for a field\n   */\n  const getComputedValue = useCallback((field: FieldConfig): FieldValue => {\n    if (!field.computed || !field.computed.formula) {\n      return getNestedValue(values as DataRecord, field.name);\n    }\n\n    const { formula, deps } = field.computed;\n\n    // Check if all dependencies have values\n    const hasAllDeps = deps.every((dep) => {\n      const depValue = getNestedValue(values as DataRecord, dep);\n      return depValue !== undefined && depValue !== null && depValue !== '';\n    });\n\n    if (!hasAllDeps) {\n      return getNestedValue(values as DataRecord, field.name);\n    }\n\n    try {\n      // Build context with dependency values\n      const context: Record<string, number> = {};\n      for (const dep of deps) {\n        const depValue = getNestedValue(values as DataRecord, dep);\n        context[dep] = typeof depValue === 'number' ? depValue : parseFloat(String(depValue)) || 0;\n      }\n\n      // Replace field references in formula\n      let expression = formula;\n      for (const [key, value] of Object.entries(context)) {\n        expression = expression.replace(new RegExp(`\\\\{${key}\\\\}`, 'g'), String(value));\n        expression = expression.replace(new RegExp(`\\\\b${key}\\\\b`, 'g'), String(value));\n      }\n\n      // Safe arithmetic evaluation (only allow numbers and math operators)\n      const safeExpression = expression.replace(/[^0-9+\\-*/().Math\\s]/g, '');\n      const fn = new Function(`return ${safeExpression}`);\n      const result = fn();\n\n      return typeof result === 'number' && !isNaN(result) ? result : undefined;\n    } catch {\n      return getNestedValue(values as DataRecord, field.name);\n    }\n  }, [values]);\n\n  /**\n   * Get all visible fields from all sections\n   */\n  const getVisibleFields = useCallback((): FieldConfig[] => {\n    const sections = config.tabs \n      ? config.tabs.filter(isTabVisible).flatMap(t => t.sections)\n      : (config.sections || []);\n      \n    return sections\n      .filter(isSectionVisible)\n      .flatMap((section) => section.fields.filter(isFieldVisible));\n  }, [config.tabs, config.sections, isTabVisible, isSectionVisible, isFieldVisible]);\n\n  /**\n   * Validate a single field\n   */\n  const validateField = useCallback((field: FieldConfig): string | undefined => {\n    const value = field.computed \n      ? getComputedValue(field) \n      : getNestedValue(values as DataRecord, field.name);\n    const result = coreValidateField(value, field, values as DataRecord);\n    return result.valid ? undefined : result.message;\n  }, [values, getComputedValue]);\n\n  /**\n   * Validate all visible fields\n   */\n  const validateAll = useCallback((): boolean => {\n    const visibleFields = getVisibleFields();\n    const newErrors: FormErrors = {};\n    let isValid = true;\n\n    for (const field of visibleFields) {\n      const error = validateField(field);\n      if (error) {\n        newErrors[field.name] = error;\n        isValid = false;\n      }\n    }\n\n    if (!isControlled) {\n      setInternalErrors(newErrors);\n    }\n\n    if (!isValid && onValidationError) {\n      onValidationError(newErrors);\n    }\n\n    return isValid;\n  }, [getVisibleFields, validateField, isControlled, onValidationError]);\n\n  /**\n   * Set a single field value\n   */\n  const setValue = useCallback((name: string, value: FieldValue) => {\n    const newValues = { ...values, [name]: value } as T;\n    \n    if (!isControlled) {\n      setInternalValues(newValues);\n    }\n\n    if (onChange) {\n      onChange(name, value, newValues);\n    }\n  }, [values, isControlled, onChange]);\n\n  /**\n   * Set multiple field values\n   */\n  const setValues = useCallback((newValues: Partial<T>) => {\n    const merged = { ...values, ...newValues } as T;\n    \n    if (!isControlled) {\n      setInternalValues(merged);\n    }\n\n    // Call onChange for each changed field\n    if (onChange) {\n      for (const [name, value] of Object.entries(newValues)) {\n        onChange(name, value as FieldValue, merged);\n      }\n    }\n  }, [values, isControlled, onChange]);\n\n  /**\n   * Reset form to initial values\n   */\n  const reset = useCallback(() => {\n    if (!isControlled) {\n      setInternalValues(initialValuesRef.current);\n      setInternalErrors({});\n    }\n    setTouched({});\n  }, [isControlled]);\n\n  /**\n   * Check if form is dirty (values changed from initial)\n   */\n  const isDirty = useCallback((): boolean => {\n    return JSON.stringify(values) !== JSON.stringify(initialValuesRef.current);\n  }, [values]);\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = useCallback(async (e?: React.FormEvent) => {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (loading || isSubmitting) return;\n\n    // Mark all fields as touched\n    const allTouched: FormTouched = {};\n    getVisibleFields().forEach((field) => {\n      allTouched[field.name] = true;\n    });\n    setTouched(allTouched);\n\n    // Validate\n    const isValid = validateAll();\n    if (!isValid) return;\n\n    // Submit\n    if (onSubmit) {\n      setIsSubmitting(true);\n      try {\n        await onSubmit(values);\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  }, [loading, isSubmitting, getVisibleFields, validateAll, onSubmit, values]);\n\n  /**\n   * Handle field change\n   */\n  const handleFieldChange = useCallback((name: string, value: FieldValue) => {\n    setValue(name, value);\n\n    // Validate on change if validationMode is 'onChange'\n    if (config.validationMode === 'onChange') {\n      const field = getVisibleFields().find((f) => f.name === name);\n      if (field) {\n        const error = validateField(field);\n        if (!isControlled) {\n          setInternalErrors((prev) => ({\n            ...prev,\n            [name]: error,\n          }));\n        }\n      }\n    }\n  }, [setValue, config.validationMode, getVisibleFields, validateField, isControlled]);\n\n  /**\n   * Handle field blur\n   */\n  const handleFieldBlur = useCallback((name: string) => {\n    setTouched((prev) => ({ ...prev, [name]: true }));\n\n    if (onBlur) {\n      onBlur(name);\n    }\n\n    // Validate on blur if validationMode is 'onBlur'\n    if (config.validationMode === 'onBlur' || !config.validationMode) {\n      const field = getVisibleFields().find((f) => f.name === name);\n      if (field) {\n        const error = validateField(field);\n        if (!isControlled) {\n          setInternalErrors((prev) => ({\n            ...prev,\n            [name]: error,\n          }));\n        }\n      }\n    }\n  }, [onBlur, config.validationMode, getVisibleFields, validateField, isControlled]);\n\n  /**\n   * Toggle section collapse\n   */\n  const toggleSectionCollapse = useCallback((sectionId: string) => {\n    setCollapsedSections((prev) => {\n      const next = new Set(prev);\n      if (next.has(sectionId)) {\n        next.delete(sectionId);\n      } else {\n        next.add(sectionId);\n      }\n      return next;\n    });\n  }, []);\n\n  // ==========================================================================\n  // IMPERATIVE HANDLE\n  // ==========================================================================\n\n  useImperativeHandle(ref, () => ({\n    getValues: () => values,\n    setValues,\n    setValue,\n    validate: validateAll,\n    reset,\n    getErrors: () => errors,\n    isDirty,\n    submit: handleSubmit,\n  }), [values, setValues, setValue, validateAll, reset, errors, isDirty, handleSubmit]);\n\n  // ==========================================================================\n  // RENDER FIELD\n  // ==========================================================================\n\n  const renderFieldElement = useCallback((field: FieldConfig): React.ReactNode => {\n    if (!isFieldVisible(field)) return null;\n\n    const fieldValue = field.computed \n      ? getComputedValue(field) \n      : getNestedValue(values as DataRecord, field.name);\n\n    const renderProps: FieldRenderProps = {\n      field,\n      value: fieldValue,\n      formData: values as FormValues,\n      error: errors[field.name],\n      touched: !!touched[field.name],\n      disabled: disabled || loading,\n      readOnly: readOnly || !!field.computed,\n      onChange: (value) => handleFieldChange(field.name, value),\n      onBlur: () => handleFieldBlur(field.name),\n    };\n\n    // Use custom renderer if provided\n    if (customRenderField) {\n      return (\n        <div \n          key={field.name}\n          style={{ gridColumn: field.colSpan ? `span ${field.colSpan}` : undefined }}\n        >\n          {customRenderField(renderProps)}\n        </div>\n      );\n    }\n\n    // Use default renderer\n    return (\n      <div \n        key={field.name}\n        style={{ gridColumn: field.colSpan ? `span ${field.colSpan}` : undefined }}\n      >\n        <DefaultFieldRenderer {...renderProps} />\n      </div>\n    );\n  }, [\n    isFieldVisible, \n    getComputedValue, \n    values, \n    errors, \n    touched, \n    disabled, \n    loading, \n    readOnly, \n    handleFieldChange, \n    handleFieldBlur, \n    customRenderField\n  ]);\n\n  // ==========================================================================\n  // RENDER SECTION\n  // ==========================================================================\n\n  const renderSectionElement = useCallback((section: FormSectionConfig): React.ReactNode => {\n    if (!isSectionVisible(section)) return null;\n\n    const isCollapsed = collapsedSections.has(section.id);\n    const visibleFields = section.fields.filter(isFieldVisible);\n\n    if (visibleFields.length === 0) return null;\n\n    const children = visibleFields.map(renderFieldElement);\n\n    const sectionProps: SectionRenderProps = {\n      section,\n      isCollapsed,\n      toggleCollapse: () => toggleSectionCollapse(section.id),\n      children,\n    };\n\n    // Use custom renderer if provided\n    if (customRenderSection) {\n      return <React.Fragment key={section.id}>{customRenderSection(sectionProps)}</React.Fragment>;\n    }\n\n    // Use default renderer\n    return <DefaultSectionRenderer key={section.id} {...sectionProps} />;\n  }, [\n    isSectionVisible, \n    collapsedSections, \n    isFieldVisible, \n    renderFieldElement, \n    toggleSectionCollapse, \n    customRenderSection\n  ]);\n\n  // ==========================================================================\n  // MEMOIZED SECTIONS\n  // ==========================================================================\n\n  const renderedSections = useMemo(() => {\n    let sectionsToRender: FormSectionConfig[] = [];\n    \n    if (config.tabs && config.tabs.length > 0) {\n      const currentTab = config.tabs.find(t => t.id === activeTab);\n      if (currentTab) {\n        sectionsToRender = currentTab.sections;\n      }\n    } else {\n      sectionsToRender = config.sections || [];\n    }\n\n    return (\n      <div className=\"grid grid-cols-6 gap-6\">\n        {sectionsToRender.map(section => {\n          const content = renderSectionElement(section);\n          if (!content) return null;\n\n          const width = section.width || 'full';\n          let colSpan = 'col-span-6';\n          if (width === '1/2') colSpan = 'col-span-3';\n          if (width === '1/3') colSpan = 'col-span-2';\n          if (width === '2/3') colSpan = 'col-span-4';\n\n          return (\n            <div key={section.id} className={colSpan}>\n              {content}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }, [config.tabs, config.sections, activeTab, renderSectionElement]);\n\n  // ==========================================================================\n  // RENDER\n  // ==========================================================================\n\n  const submitLabel = config.submitLabel || t('form.submit');\n  const cancelLabel = config.cancelLabel || t('form.cancel');\n  const isFormDisabled = disabled || loading || isSubmitting;\n\n  return (\n    <form \n      onSubmit={handleSubmit}\n      className={cn('dui-form', className)}\n    >\n      {/* Header */}\n      {(config.title || header) && (\n        <div className=\"dui-form__header\">\n          {header || (\n            <>\n              <h2 className=\"dui-form__title\">{config.title}</h2>\n              {config.description && (\n                <p className=\"dui-form__description\">{config.description}</p>\n              )}\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Tabs */}\n      {config.tabs && config.tabs.length > 0 && (\n        <TabRenderer\n          tabs={config.tabs.filter(isTabVisible).map(t => ({\n            id: t.id,\n            label: t.label,\n            icon: t.icon as any\n          }))}\n          activeTab={activeTab}\n          onChange={setActiveTab}\n          className=\"mb-6\"\n        />\n      )}\n\n      {/* Sections */}\n      <div className=\"dui-form__body\">\n        {renderedSections}\n      </div>\n\n      {/* Footer / Buttons */}\n      {(footer || (!hideButtons && (onSubmit || onCancel || config.showCancel))) && (\n        <div className=\"dui-form__footer\">\n          {footer || (\n            <>\n              {(onCancel || config.showCancel) && (\n                <button\n                  type=\"button\"\n                  onClick={onCancel}\n                  disabled={isFormDisabled}\n                  className=\"dui-form__button dui-form__button--cancel\"\n                >\n                  {cancelLabel}\n                </button>\n              )}\n              {onSubmit && (\n                <button\n                  type=\"submit\"\n                  disabled={isFormDisabled}\n                  className=\"dui-form__button dui-form__button--submit\"\n                >\n                  {(loading || isSubmitting) ? t('form.submitting') : submitLabel}\n                </button>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </form>\n  );\n}\n\n// Forward ref with generic support\nexport const FormRenderer = forwardRef(FormRendererInner) as <T extends DataRecord = DataRecord>(\n  props: FormRendererProps<T> & { ref?: React.ForwardedRef<FormRendererRef<T>> }\n) => React.ReactElement;\n\n// Set display name\n(FormRenderer as React.FC).displayName = 'FormRenderer';\n\nexport default FormRenderer;\n","/**\n * @fileoverview DynamicModal Component\n * \n * A modal dialog wrapper for dynamic forms with support for:\n * - Multiple tabs/sections\n * - Loading and error states\n * - Confirmation dialogs\n * - Custom actions (save, delete, cancel)\n * - Backdrop click handling\n * - Keyboard shortcuts (Escape to close)\n * \n * @module components/DynamicModal\n */\n\nimport React, { \n  forwardRef, \n  useImperativeHandle, \n  useCallback,\n  useState,\n  useEffect,\n  useRef,\n  useMemo,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport type { \n  FormConfig, \n  FieldValue, \n  DataRecord,\n  ModalMode,\n} from '../core/types';\nimport { getModalTitle, getModalSubmitLabel } from '../config-system/modalConfig';\nimport { cn } from '../core/utils';\nimport { useI18n, t } from '../i18n/I18n';\nimport { FormRenderer, type FormRendererRef, type FormErrors } from './FormRenderer';\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\n/**\n * Modal size variants\n */\nexport type ModalSize = 'sm' | 'md' | 'lg' | 'xl' | 'full';\n\n/**\n * Tab configuration for tabbed modals\n */\nexport interface ModalTab {\n  /** Unique tab identifier */\n  id: string;\n  /** Tab label */\n  label: string;\n  /** Tab icon (optional) */\n  icon?: React.ReactNode;\n  /** Tab content (FormConfig or custom content) */\n  content?: FormConfig;\n  /** Custom render function for tab content */\n  render?: (formData: DataRecord) => React.ReactNode;\n  /** Whether tab is disabled */\n  disabled?: boolean;\n  /** Badge count or text */\n  badge?: string | number;\n}\n\n/**\n * Modal action button\n */\nexport interface ModalAction {\n  /** Unique action identifier */\n  id: string;\n  /** Button label */\n  label: string;\n  /** Button variant */\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\n  /** Icon (optional) */\n  icon?: React.ReactNode;\n  /** Whether action is disabled */\n  disabled?: boolean;\n  /** Whether action is loading */\n  loading?: boolean;\n  /** Click handler */\n  onClick?: () => void | Promise<void>;\n  /** Position in footer */\n  position?: 'left' | 'right';\n}\n\n/**\n * Confirmation dialog config\n */\nexport interface ConfirmationConfig {\n  /** Dialog title */\n  title: string;\n  /** Dialog message */\n  message: string;\n  /** Confirm button label */\n  confirmLabel?: string;\n  /** Cancel button label */\n  cancelLabel?: string;\n  /** Confirm button variant */\n  confirmVariant?: 'primary' | 'danger';\n}\n\n/**\n * Title or submit label: single string or per-mode (create/edit/view)\n */\nexport type TitleOrLabelByMode = string | { create?: string; edit?: string; view?: string };\n\n/**\n * DynamicModal props\n */\nexport interface DynamicModalProps<T extends DataRecord = DataRecord> {\n  /** Whether modal is open */\n  open: boolean;\n  /** Callback when modal should close */\n  onClose: () => void;\n  /** Modal mode: create (new), edit (existing), or view (read-only). When 'view', submit/delete are hidden and form is read-only. */\n  mode?: ModalMode;\n  /** Modal title (string or per-mode object) */\n  title: string | TitleOrLabelByMode;\n  /** Modal subtitle/description */\n  subtitle?: string;\n  /** Submit button label (string or per-mode). Only shown when mode !== 'view' and onSubmit is provided. */\n  submitLabel?: TitleOrLabelByMode;\n  /** Modal size */\n  size?: ModalSize;\n  /** Form configuration (for single-form modals) */\n  config?: FormConfig;\n  /** Tabs configuration (for tabbed modals) */\n  tabs?: ModalTab[];\n  /** Initial form values */\n  initialValues?: T;\n  /** Submit handler */\n  onSubmit?: (values: T) => void | Promise<void>;\n  /** Delete handler (shows delete button if provided) */\n  onDelete?: () => void | Promise<void>;\n  /** Custom actions */\n  actions?: ModalAction[];\n  /** External loading state */\n  loading?: boolean;\n  /** External error message */\n  error?: string;\n  /** Validation errors */\n  errors?: FormErrors;\n  /** Whether to close on backdrop click */\n  closeOnBackdropClick?: boolean;\n  /** Whether to close on Escape key */\n  closeOnEscape?: boolean;\n  /** Custom header content */\n  header?: React.ReactNode;\n  /** Custom footer content */\n  footer?: React.ReactNode;\n  /** Additional class name */\n  className?: string;\n  /** Delete confirmation config */\n  deleteConfirmation?: ConfirmationConfig;\n  /** Whether to show close button in header */\n  showCloseButton?: boolean;\n  /** Custom field renderer for FormRenderer */\n  renderField?: React.ComponentProps<typeof FormRenderer>['renderField'];\n  /** Custom section renderer for FormRenderer */\n  renderSection?: React.ComponentProps<typeof FormRenderer>['renderSection'];\n  /** Feature flags for conditional rendering */\n  featureFlags?: Record<string, boolean>;\n  /** Theme mode: 'system' (prefers-color-scheme), 'light' or 'dark' */\n  theme?: 'system' | 'light' | 'dark';\n  /** Entity name for dynamic translations (e.g. \"Delete {{entity}}\") */\n  entityName?: string;\n}\n\n/**\n * DynamicModal ref interface\n */\nexport interface DynamicModalRef<T extends DataRecord = DataRecord> {\n  /** Get current form values */\n  getValues: () => T;\n  /** Set form values */\n  setValues: (values: Partial<T>) => void;\n  /** Validate form */\n  validate: () => boolean;\n  /** Reset form */\n  reset: () => void;\n  /** Close the modal */\n  close: () => void;\n  /** Submit the form */\n  submit: () => Promise<void>;\n}\n\n// =============================================================================\n// SIZE MAP\n// =============================================================================\n\nconst SIZE_MAP: Record<ModalSize, string> = {\n  sm: 'dui-modal--sm',\n  md: 'dui-modal--md',\n  lg: 'dui-modal--lg',\n  xl: 'dui-modal--xl',\n  full: 'dui-modal--full',\n};\n\n// =============================================================================\n// CONFIRMATION DIALOG\n// =============================================================================\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  onConfirm: () => void;\n  onCancel: () => void;\n  config: ConfirmationConfig;\n  loading?: boolean;\n  entityName?: string;\n}\n\nfunction ConfirmDialog({ open, onConfirm, onCancel, config, loading, entityName }: ConfirmDialogProps) {\n  const { t } = useI18n();\n\n  if (!open) return null;\n\n  const resolvedEntity = entityName || t('entities.unknown', undefined, 'Item');\n\n  return (\n    <div className=\"dui-modal__confirm-overlay\">\n      <div className=\"dui-modal__confirm-dialog\">\n        <h4 className=\"dui-modal__confirm-title\">{typeof config.title === 'string' ? t(config.title, { entity: resolvedEntity }) : config.title}</h4>\n        <p className=\"dui-modal__confirm-message\">{typeof config.message === 'string' ? t(config.message, { entity: resolvedEntity }) : config.message}</p>\n        <div className=\"dui-modal__confirm-actions\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            disabled={loading}\n            className=\"dui-modal__button dui-modal__button--secondary\"\n          >\n            {config.cancelLabel || t('modal.cancel')}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onConfirm}\n            disabled={loading}\n            className={cn(\n              'dui-modal__button',\n              config.confirmVariant === 'danger' \n                ? 'dui-modal__button--danger' \n                : 'dui-modal__button--primary'\n            )}\n          >\n            {loading ? t('modal.loading') : config.confirmLabel || t('modal.confirm')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// DYNAMIC MODAL COMPONENT\n// =============================================================================\n\n/**\n * DynamicModal component\n * \n * A flexible modal dialog for forms and content.\n * \n * @example\n * ```tsx\n * <DynamicModal\n *   open={isOpen}\n *   onClose={() => setIsOpen(false)}\n *   title=\"Edit Product\"\n *   config={productFormConfig}\n *   initialValues={product}\n *   onSubmit={handleSave}\n *   onDelete={handleDelete}\n *   size=\"lg\"\n * />\n * ```\n */\nfunction DynamicModalInner<T extends DataRecord = DataRecord>(\n  props: DynamicModalProps<T>,\n  ref: React.ForwardedRef<DynamicModalRef<T>>\n): React.ReactElement | null {\n  const {\n    open,\n    onClose,\n    mode,\n    title: titleProp,\n    submitLabel: submitLabelProp,\n    subtitle,\n    size = 'xl',\n    config,\n    tabs,\n    initialValues = {} as T,\n    onSubmit,\n    onDelete,\n    actions = [],\n    loading = false,\n    error,\n    errors,\n    closeOnBackdropClick = false,\n    closeOnEscape = true,\n    header,\n    footer,\n    className,\n    deleteConfirmation,\n    showCloseButton = true,\n    renderField,\n    renderSection,\n    featureFlags = {},\n    theme = 'system',\n    entityName,\n  } = props;\n\n  const { t } = useI18n();\n  const effectiveMode: ModalMode = mode ?? 'edit';\n  const resolvedEntity = entityName || t('entities.unknown', undefined, 'Item');\n\n  const title = typeof titleProp === 'string'\n    ? titleProp\n    : getModalTitle(titleProp, effectiveMode);\n  const submitLabel = submitLabelProp == null\n    ? (effectiveMode === 'create' ? t('modal.create', { entity: resolvedEntity }) : t('modal.save'))\n    : (typeof submitLabelProp === 'string'\n        ? submitLabelProp\n        : getModalSubmitLabel(submitLabelProp, effectiveMode));\n  const isViewMode = effectiveMode === 'view';\n\n  const formRef = useRef<FormRendererRef<T>>(null);\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // State\n  const [activeTab, setActiveTab] = useState<string>(tabs?.[0]?.id || '');\n  const [internalValues, setInternalValues] = useState<T>(initialValues);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n\n  // Reset state when modal opens\n  useEffect(() => {\n    if (open) {\n      setInternalValues(initialValues);\n      setActiveTab(tabs?.[0]?.id || '');\n      setShowDeleteConfirm(false);\n    }\n  }, [open, initialValues, tabs]);\n\n  // Handle Escape key\n  useEffect(() => {\n    if (!open || !closeOnEscape) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && !showDeleteConfirm) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [open, closeOnEscape, onClose, showDeleteConfirm]);\n\n  // Lock body scroll when open\n  useEffect(() => {\n    if (open) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [open]);\n\n  // Focus trap (basic implementation)\n  useEffect(() => {\n    if (!open || !modalRef.current) return;\n\n    const focusableElements = modalRef.current.querySelectorAll(\n      'button, [href], input, selectextarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey) {\n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement?.focus();\n        }\n      } else {\n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleTab);\n    firstElement?.focus();\n\n    return () => document.removeEventListener('keydown', handleTab);\n  }, [open]);\n\n  // ==========================================================================\n  // HANDLERS\n  // ==========================================================================\n\n  /**\n   * Handle backdrop click\n   */\n  const handleBackdropClick = useCallback((e: React.MouseEvent) => {\n    if (e.target === e.currentTarget && closeOnBackdropClick && !showDeleteConfirm) {\n      onClose();\n    }\n  }, [closeOnBackdropClick, onClose, showDeleteConfirm]);\n\n  /**\n   * Handle form value change\n   */\n  const handleFormChange = useCallback((name: string, value: FieldValue, values: T) => {\n    setInternalValues(values);\n  }, []);\n\n  /**\n   * Handle form submit\n   */\n  const handleSubmit = useCallback(async () => {\n    if (loading || isSubmitting) return;\n\n    // Validate first\n    const isValid = formRef.current?.validate();\n    if (!isValid) return;\n\n    const values = formRef.current?.getValues() || internalValues;\n\n    if (onSubmit) {\n      setIsSubmitting(true);\n      try {\n        await onSubmit(values);\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  }, [loading, isSubmitting, internalValues, onSubmit]);\n\n  /**\n   * Handle delete\n   */\n  const handleDelete = useCallback(async () => {\n    if (!onDelete) return;\n\n    setIsDeleting(true);\n    try {\n      await onDelete();\n      setShowDeleteConfirm(false);\n    } finally {\n      setIsDeleting(false);\n    }\n  }, [onDelete]);\n\n  /**\n   * Handle delete button click\n   */\n  const handleDeleteClick = useCallback(() => {\n    if (deleteConfirmation) {\n      setShowDeleteConfirm(true);\n    } else if (onDelete) {\n      handleDelete();\n    }\n  }, [deleteConfirmation, onDelete, handleDelete]);\n\n  // ==========================================================================\n  // IMPERATIVE HANDLE\n  // ==========================================================================\n\n  useImperativeHandle(ref, () => ({\n    getValues: () => formRef.current?.getValues() || internalValues,\n    setValues: (values) => {\n      formRef.current?.setValues(values);\n      setInternalValues((prev) => ({ ...prev, ...values }));\n    },\n    validate: () => formRef.current?.validate() || true,\n    reset: () => {\n      formRef.current?.reset();\n      setInternalValues(initialValues);\n    },\n    close: onClose,\n    submit: handleSubmit,\n  }), [internalValues, initialValues, onClose, handleSubmit]);\n\n  // ==========================================================================\n  // RENDER HELPERS\n  // ==========================================================================\n\n  /**\n   * Get current tab config\n   */\n  const currentTab = useMemo(() => {\n    return tabs?.find((tab) => tab.id === activeTab);\n  }, [tabs, activeTab]);\n\n  /**\n   * Get current form config\n   */\n  const currentFormConfig = useMemo(() => {\n    if (config) return config;\n    return currentTab?.content;\n  }, [config, currentTab]);\n\n  /**\n   * Render tabs header\n   */\n  const renderTabs = useCallback(() => {\n    if (!tabs || tabs.length === 0) return null;\n\n    return (\n      <div className=\"dui-modal__tabs\">\n        {tabs.map((tab) => (\n          <button\n            key={tab.id}\n            type=\"button\"\n            onClick={() => setActiveTab(tab.id)}\n            disabled={tab.disabled}\n            className={cn(\n              'dui-modal__tab',\n              activeTab === tab.id && 'dui-modal__tab--active',\n              tab.disabled && 'dui-modal__tab--disabled'\n            )}\n          >\n            {tab.icon && <span className=\"dui-modal__tab-icon\">{tab.icon}</span>}\n            <span className=\"dui-modal__tab-label\">{tab.label}</span>\n            {tab.badge !== undefined && (\n              <span className=\"dui-modal__tab-badge\">{tab.badge}</span>\n            )}\n          </button>\n        ))}\n      </div>\n    );\n  }, [tabs, activeTab]);\n\n  /**\n   * Render content\n   */\n  const renderContent = useCallback(() => {\n    // Custom render for current tab\n    if (currentTab?.render) {\n      return currentTab.render(internalValues as DataRecord);\n    }\n\n    // Form content\n    if (currentFormConfig) {\n      return (\n        <FormRenderer<T>\n          ref={formRef}\n          config={currentFormConfig}\n          values={internalValues}\n          errors={errors}\n          onChange={handleFormChange}\n          loading={loading || isSubmitting}\n          readOnly={isViewMode}\n          renderField={renderField}\n          renderSection={renderSection}\n          featureFlags={featureFlags}\n          hideButtons\n        />\n      );\n    }\n\n    return null;\n  }, [\n    currentTab, \n    currentFormConfig, \n    internalValues, \n    errors, \n    handleFormChange, \n    loading, \n    isSubmitting,\n    renderField,\n    renderSection,\n  ]);\n\n  /**\n   * Render actions\n   */\n  const renderActions = useCallback(() => {\n    if (footer) return footer;\n\n    const leftActions = actions.filter((a) => a.position === 'left');\n    const rightActions = actions.filter((a) => a.position !== 'left');\n\n    return (\n      <div className=\"dui-modal__footer\">\n        <div className=\"dui-modal__footer-left\">\n          {/* Delete button (hidden in view mode) */}\n          {!isViewMode && onDelete && (\n            <button\n              type=\"button\"\n              onClick={handleDeleteClick}\n              disabled={loading || isSubmitting || isDeleting}\n              className=\"dui-modal__button dui-modal__button--danger\"\n            >\n              {isDeleting ? t('modal.deleting', { entity: resolvedEntity }) : t('modal.delete', { entity: resolvedEntity })}\n            </button>\n          )}\n          \n          {/* Left custom actions */}\n          {leftActions.map((action) => (\n            <button\n              key={action.id}\n              type=\"button\"\n              onClick={action.onClick}\n              disabled={action.disabled || action.loading}\n              className={cn(\n                'dui-modal__button',\n                `dui-modal__button--${action.variant || 'secondary'}`\n              )}\n            >\n              {action.icon && <span className=\"dui-modal__button-icon\">{action.icon}</span>}\n              {action.loading ? t('modal.loading') : action.label}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"dui-modal__footer-right\">\n          {/* Right custom actions */}\n          {rightActions.map((action) => (\n            <button\n              key={action.id}\n              type=\"button\"\n              onClick={action.onClick}\n              disabled={action.disabled || action.loading}\n              className={cn(\n                'dui-modal__button',\n                `dui-modal__button--${action.variant || 'secondary'}`\n              )}\n            >\n              {action.icon && <span className=\"dui-modal__button-icon\">{action.icon}</span>}\n              {action.loading ? t('modal.loading') : action.label}\n            </button>\n          ))}\n\n          {/* Cancel button */}\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={loading || isSubmitting}\n            className=\"dui-modal__button dui-modal__button--secondary\"\n          >\n            {t('modal.cancel')}\n          </button>\n\n          {/* Submit button (hidden in view mode) */}\n          {!isViewMode && onSubmit && (\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || isSubmitting}\n              className=\"dui-modal__button dui-modal__button--primary\"\n            >\n              {(loading || isSubmitting) ? t('modal.saving') : submitLabel}\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }, [\n    footer,\n    actions,\n    onDelete,\n    onSubmit,\n    onClose,\n    handleDeleteClick,\n    handleSubmit,\n    loading,\n    isSubmitting,\n    isDeleting,\n    isViewMode,\n    submitLabel,\n    t,\n  ]);\n\n  // ==========================================================================\n  // RENDER\n  // ==========================================================================\n\n  if (!open) return null;\n\n  const overlayClass = cn(\n    'dui-modal__overlay',\n    theme === 'dark' ? 'dui-theme--dark' : theme === 'light' ? 'dui-theme--light' : ''\n  );\n\n  const modalContent = (\n    <div \n      className={overlayClass}\n      onClick={handleBackdropClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"modal-title\"\n    >\n      <div \n        ref={modalRef}\n        className={cn(\n          'dui-modal',\n          SIZE_MAP[size],\n          className\n        )}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        {header || (\n          <div className=\"dui-modal__header\">\n            <div className=\"dui-modal__header-content\">\n              <h2 id=\"modal-title\" className=\"dui-modal__title\">{title}</h2>\n              {subtitle && <p className=\"dui-modal__subtitle\">{subtitle}</p>}\n            </div>\n            {showCloseButton && (\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"dui-modal__close\"\n                aria-label={t('modal.close')}\n              >\n                \n              </button>\n            )}\n          </div>\n        )}\n\n        {/* Tabs */}\n        {renderTabs()}\n\n        {/* Error message */}\n        {error && (\n          <div className=\"dui-modal__error\">\n            {error}\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"dui-modal__body\">\n          {renderContent()}\n        </div>\n\n        {/* Footer */}\n        {renderActions()}\n\n        {/* Delete confirmation */}\n        {deleteConfirmation && (\n          <ConfirmDialog\n            open={showDeleteConfirm}\n            onConfirm={handleDelete}\n            onCancel={() => setShowDeleteConfirm(false)}\n            config={deleteConfirmation}\n            loading={isDeleting}\n            entityName={resolvedEntity}\n          />\n        )}\n      </div>\n    </div>\n  );\n\n  return createPortal(modalContent, document.body);\n}\n\n// Forward ref with generic support\nexport const DynamicModal = forwardRef(DynamicModalInner) as <T extends DataRecord = DataRecord>(\n  props: DynamicModalProps<T> & { ref?: React.ForwardedRef<DynamicModalRef<T>> }\n) => React.ReactElement | null;\n\n// Set display name\n(DynamicModal as React.FC).displayName = 'DynamicModal';\n\nexport default DynamicModal;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { createPortal } from \"react-dom\";\nimport { useI18n, resolveLabel, t } from '../i18n/I18n';\n\nexport type SidebarItemType = 'link' | 'dropdown' | 'group' | 'separator';\n\nexport interface SidebarItem {\n  type: SidebarItemType;\n  id?: string; // required for dropdowns and keys\n  label: string; // translation key or literal text\n  icon?: string; // emoji or icon name\n  path?: string;\n  children?: SidebarItem[];\n  roles?: string[]; // permissions: allowed roles\n  badge?: string; // notification badge key (optional)\n  description?: string; // accessible description\n}\n\nexport interface SidebarRendererProps {\n  items: SidebarItem[];\n  collapsed: boolean;\n  onToggleCollapse?: (collapsed: boolean) => void;\n  currentPath: string;\n  onNavigate?: (path: string) => void;\n  LinkComponent?: React.ComponentType<any>;\n  userRole?: string;\n  t?: (key: string) => string; // Translation function\n  logoContent?: React.ReactNode;\n  headerContent?: React.ReactNode; // Optional extra header content\n  footerContent?: React.ReactNode; \n  onLogout?: () => void;\n}\n\nconst DefaultLink: React.FC<any> = ({ to, children, className, onClick }) => (\n  <a href={to} className={className} onClick={(e) => {\n    // If onClick is provided, it might handle navigation (SPA)\n    if (onClick) onClick(e);\n  }}>\n    {children}\n  </a>\n);\n\nexport const SidebarRenderer: React.FC<SidebarRendererProps> = ({\n  items,\n  collapsed,\n  onToggleCollapse,\n  currentPath,\n  onNavigate,\n  LinkComponent = DefaultLink,\n  userRole,\n  t: passedT, // Passed translation function\n  logoContent,\n  footerContent,\n  onLogout\n}) => {\n  // Dropdown portal state\n  const [openMenu, setOpenMenu] = useState<string | null>(null);\n  const [anchorRect, setAnchorRect] = useState<DOMRect | null>(null);\n  \n  // Refs for tracking button positions\n  const buttonRefs = useRef<{[key: string]: HTMLButtonElement | null}>({});\n  \n  // Use provided t or library t (shorthand)\n  const translate = passedT || t;\n\n  const isActive = (path?: string) => {\n    if (!path) return false;\n    // Simple check: exact match or starts with path (for nested routes)\n    if (path === '/' || path === '/dashboard') return currentPath === path;\n    return currentPath.startsWith(path);\n  };\n\n  const isChildActive = (item: SidebarItem): boolean => {\n    if (item.path && isActive(item.path)) return true;\n    if (item.children) {\n      return item.children.some(child => isChildActive(child));\n    }\n    return false;\n  };\n\n  const toggleSidebar = () => onToggleCollapse && onToggleCollapse(!collapsed);\n\n  const toggleMenu = (\n    id: string,\n    element: HTMLButtonElement | null\n  ) => {\n    if (openMenu === id) {\n      setOpenMenu(null);\n      setAnchorRect(null);\n      return;\n    }\n    setOpenMenu(id);\n    if (element) {\n      setAnchorRect(element.getBoundingClientRect());\n    }\n  };\n\n  useEffect(() => {\n    if (!openMenu) return;\n    function onDocClick(e: MouseEvent) {\n      const target = e.target as Node;\n      \n      // If click is on the button that opened the menu, ignore (handled by toggleMenu)\n      const buttonId = openMenu;\n      if (buttonId && buttonRefs.current[buttonId]?.contains(target)) return;\n\n      // if click inside any portal menu, keep open\n      const menus = document.querySelectorAll('[data-portal=\"true\"]');\n      for (const m of Array.from(menus)) {\n        if (m.contains(target)) return;\n      }\n      setOpenMenu(null);\n    }\n    function onKey(e: KeyboardEvent) {\n      if (e.key === \"Escape\") setOpenMenu(null);\n    }\n    document.addEventListener(\"click\", onDocClick);\n    document.addEventListener(\"keydown\", onKey);\n    return () => {\n      document.removeEventListener(\"click\", onDocClick);\n      document.removeEventListener(\"keydown\", onKey);\n    };\n  }, [openMenu]);\n\n  // Filter items based on permissions\n  const filteredItems = items.filter(item => {\n    if (!item.roles || item.roles.length === 0) return true;\n    if (!userRole) return false;\n    return item.roles.includes(userRole);\n  });\n\n  const renderItem = (item: SidebarItem, index: number) => {\n    // Permission check inside recursion (though main list is already filtered)\n    if (item.roles && item.roles.length > 0 && userRole && !item.roles.includes(userRole)) {\n      return null;\n    }\n\n    if (item.type === 'separator') {\n      if (collapsed) return null;\n      return (\n        <li key={`sep-${index}`} className=\"none text-gray-100\">\n          <div className=\"h-px bg-gradient-to-r from-transparent via-white/20 to-transparent\"></div>\n        </li>\n      );\n    }\n\n    if (item.type === 'link') {\n      const active = isActive(item.path);\n      return (\n        <li key={item.id || item.path || index}>\n          <LinkComponent\n            to={item.path}\n            onClick={(e: any) => {\n              if (onNavigate && item.path) {\n                // If onNavigate is provided, we might want to let the Link handle it or intercept it\n                // Usually LinkComponent (Link from react-router) handles navigation.\n                // onNavigate might be for sidebar closing actions on mobile etc.\n                onNavigate(item.path);\n              }\n            }}\n            className={`group relative flex items-center gap-3 px-4 rounded-xl transition-all duration-200 ${\n              active\n                ? \"bg-gradient-to-r from-blue-400/20 to-blue-400/20 shadow-lg shadow-blue-500/30\"\n                : \"hover:bg-white/5 hover:shadow-md hover:shadow-blue-500/10\"\n            }`}\n          >\n            <div\n              className={`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 ${\n                active ? \"\" : \"\"\n              }`}\n            >\n              <span className=\"text-xl\">{item.icon || ''}</span>\n            </div>\n            {!collapsed && (\n              <span className=\"font-semibold text-sm tracking-wide\">\n                {translate(item.label)}\n              </span>\n            )}\n            {active && !collapsed && (\n              <div className=\"ml-auto w-2 h-2 bg-white rounded-full animate-pulse\"></div>\n            )}\n            {/* Badge here if needed */}\n          </LinkComponent>\n        </li>\n      );\n    }\n\n    if (item.type === 'dropdown') {\n      // For dropdowns, we check if any child is active to highlight the parent\n      const anyChildActive = isChildActive(item);\n      const isOpen = openMenu === item.id;\n      \n      return (\n        <li key={item.id || index}>\n          <button\n            ref={el => buttonRefs.current[item.id!] = el}\n            onClick={(e) => toggleMenu(item.id!, e.currentTarget)}\n            className={`group w-full relative flex items-center gap-3 px-4 rounded-xl transition-all duration-200 text-left ${\n              isOpen || anyChildActive\n                ? 'bg-gradient-to-r from-blue-400/20 to-blue-400/20 shadow-lg shadow-blue-500/30'\n                : 'hover:bg-white/5 hover:shadow-md hover:shadow-blue-500/10'\n            }`}\n          >\n            <div\n              className={`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200`}\n            >\n              <span className=\"text-xl\">{item.icon || ''}</span>\n            </div>\n            {!collapsed && (\n              <>\n                <span className=\"font-semibold text-sm tracking-wide flex-1\">\n                  {translate(item.label)}\n                </span>\n                <span\n                  className={`transition-transform duration-300 text-xs ${isOpen ? \"rotate-90\" : \"\"}`}\n                >\n                  \n                </span>\n              </>\n            )}\n          </button>\n        </li>\n      );\n    }\n\n    return null;\n  };\n\n  // Render Portal Menus\n  const renderPortalMenus = () => {\n    return items.map(item => {\n      if (item.type !== 'dropdown' || !item.children || !item.id) return null;\n      if (openMenu !== item.id || !anchorRect) return null;\n\n      // Filter children permissions\n      const visibleChildren = item.children.filter(child => {\n        if (!child.roles || child.roles.length === 0) return true;\n        if (!userRole) return false;\n        return child.roles.includes(userRole);\n      });\n\n      if (visibleChildren.length === 0) return null;\n\n      return createPortal(\n        <ul\n          key={`menu-${item.id}`}\n          data-portal=\"true\"\n          className=\"fixed bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border border-gray-200/50 dark:border-white/10 rounded-2xl shadow-2xl shadow-blue-500/20 z-50 min-w-max overflow-hidden transition-colors\"\n          style={{\n            left: `${anchorRect.right + 12}px`,\n            top: `${anchorRect.top}px`,\n          }}\n        >\n          {visibleChildren.map((child, idx) => {\n            const isFirst = idx === 0;\n            const isLast = idx === visibleChildren.length - 1;\n            \n            if (child.type === 'separator') {\n              return (\n                 <li key={idx} className=\"border-t border-gray-200/50 dark:border-white/10\"></li>\n              );\n            }\n\n            return (\n              <li key={child.id || child.path || idx}>\n                <LinkComponent\n                  to={child.path}\n                  onClick={() => {\n                    setOpenMenu(null);\n                    if (onNavigate && child.path) onNavigate(child.path);\n                  }}\n                  className={`group flex items-center gap-3 px-5 py-3.5 text-gray-700 dark:text-gray-200 hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-900/40 dark:hover:to-purple-900/40 transition-all duration-200 ${\n                    isFirst ? 'first:rounded-t-2xl' : ''\n                  } ${isLast ? 'last:rounded-b-2xl' : ''}`}\n                >\n                  <span className=\"text-xl group-hover:scale-110 transition-transform\">\n                    {child.icon || ''}\n                  </span>\n                  <span className=\"font-semibold text-sm\">\n                    {translate(child.label)}\n                  </span>\n                </LinkComponent>\n              </li>\n            );\n          })}\n        </ul>,\n        document.body\n      );\n    });\n  };\n\n  return (\n    <>\n      <div\n        className={`fixed top-0 left-0 h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white z-40 transition-all duration-300 overflow-y-auto overflow-x-hidden ${\n          collapsed ? \"w-20\" : \"w-72\"\n        }`}\n      >\n        {/* Overlay pattern for texture */}\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjAzIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-50\"></div>\n\n        {/* Header */}\n        <div\n          className={`relative flex items-center ${collapsed ? \"justify-center\" : \"justify-between\"} p-5 border-b border-white/10 backdrop-blur-sm`}\n        >\n          {logoContent}\n          \n          <div className=\"flex items-center gap-2\">\n             {/* Expansion/Collapse Button */}\n             <button\n                onClick={toggleSidebar}\n                className=\"relative hover:bg-white/10 rounded-lg transition-all duration-200 group z-20 focus:outline-none focus:ring-2 focus:ring-white/30 p-1\"\n                title={collapsed ? translate('nav.expand') : translate('nav.collapse')}\n              >\n                <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg opacity-0 group-hover:opacity-20 transition-opacity\"></div>\n                <svg\n                  className=\"relative w-5 h-5 text-white\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M3 5h14a1 1 0 010 2H3a1 1 0 010-2zm0 4h14a1 1 0 010 2H3a1 1 0 010-2zm0 4h14a1 1 0 010 2H3a1 1 0 010-2z\"\n                    clipRule=\"evenodd\"\n                  />\n                </svg>\n              </button>\n          </div>\n        </div>\n\n        {/* Navigation Items */}\n        <ul className=\"relative space-y-1 mt-4\">\n          {filteredItems.map(renderItem)}\n          \n          {/* Default Logout - if provided and not in items list, append at bottom */}\n          {onLogout && (\n             <li>\n              <button\n                onClick={onLogout}\n                className=\"group w-full relative flex items-center gap-3 px-4 rounded-xl transition-all duration-200 mt-2\"\n              >\n                <div className=\"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200\">\n                  <span className=\"text-xl\"></span>\n                </div>\n                {!collapsed && (\n                  <span className=\"font-semibold text-sm tracking-wide\">\n                    {translate('nav.logout')}\n                  </span>\n                )}\n              </button>\n            </li>\n          )}\n        </ul>\n\n         {/* Bottom decoration */}\n         <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 via-purple-500 to-blue-600\"></div>\n      </div>\n\n      {renderPortalMenus()}\n    </>\n  );\n};\n","export type Transform = {\n  x: number;\n  y: number;\n  scaleX: number;\n  scaleY: number;\n};\n\nexport interface Transition {\n  property: string;\n  easing: string;\n  duration: number;\n}\n\nexport const CSS = Object.freeze({\n  Translate: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {x, y} = transform;\n\n      return `translate3d(${x ? Math.round(x) : 0}px, ${\n        y ? Math.round(y) : 0\n      }px, 0)`;\n    },\n  },\n  Scale: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {scaleX, scaleY} = transform;\n\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    },\n  },\n  Transform: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      return [\n        CSS.Translate.toString(transform),\n        CSS.Scale.toString(transform),\n      ].join(' ');\n    },\n  },\n  Transition: {\n    toString({property, duration, easing}: Transition) {\n      return `${property} ${duration}ms ${easing}`;\n    },\n  },\n});\n","import React from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { KanbanItem } from './KanbanTypes';\nimport { cn } from '../../core/utils';\n\ninterface KanbanCardProps {\n  item: KanbanItem;\n  onClick?: (item: KanbanItem) => void;\n  isOverlay?: boolean;\n}\n\nexport function KanbanCard({ item, onClick, isOverlay }: KanbanCardProps) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id: item.id });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.3 : 1,\n    cursor: isDragging ? 'grabbing' : 'grab',\n  };\n\n  return (\n    <div\n      ref={setNodeRef}\n      {...attributes}\n      {...listeners}\n      className={cn(\n        \"dui-kanban-card card mb-2 shadow-sm border-0\",\n        isOverlay && \"dui-kanban-card-overlay\",\n        isDragging && \"dui-kanban-card-dragging\"\n      )}\n      onClick={() => onClick && onClick(item)}\n      style={{\n        ...style,\n        borderRadius: '8px',\n        borderLeft: item.color ? `4px solid ${item.color}` : 'none',\n        transition: 'all 0.2s ease'\n      }}\n    >\n      <div className=\"card-body p-3\">\n        <div className=\"d-flex justify-content-between align-items-start mb-2\">\n            <h6 className=\"card-title fw-bold text-truncate mb-0\" style={{ maxWidth: '90%', fontSize: '0.9rem' }} title={item.title}>\n              {item.title}\n            </h6>\n        </div>\n        \n        {item.subtitle && (\n          <p className=\"card-subtitle text-muted mb-2\" style={{ fontSize: '0.75rem', lineHeight: '1.2' }}>\n            {item.subtitle}\n          </p>\n        )}\n\n        {/* Metadata section */}\n        {item.metadata && Object.keys(item.metadata).length > 0 && (\n          <div className=\"dui-kanban-card-metadata mb-2\">\n             {Object.entries(item.metadata).map(([key, value]) => (\n               <div key={key} className=\"text-secondary d-flex justify-content-between\" style={{ fontSize: '0.7rem' }}>\n                 <span className=\"text-muted dark:text-gray-400\">{key}:</span> \n                 <span className=\"fw-medium text-dark dark:text-gray-200\">{String(value)}</span>\n               </div>\n             ))}\n          </div>\n        )}\n\n        {/* Tags */}\n        {item.tags && item.tags.length > 0 && (\n          <div className=\"d-flex flex-wrap gap-1 mt-auto\">\n            {item.tags.map((tag, idx) => (\n              <span\n                key={idx}\n                className=\"badge rounded-pill\"\n                style={{\n                    backgroundColor: tag.color ? `${tag.color}15` : 'var(--bg-tertiary)',\n                    color: tag.color || 'var(--text-secondary)',\n                    fontSize: '0.65rem',\n                    fontWeight: 600,\n                    border: tag.color ? `1px solid ${tag.color}30` : '1px solid var(--border-color)'\n                }}\n              >\n                {tag.label}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useDroppable } from '@dnd-kit/core';\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { KanbanColumnDef, KanbanItem } from './KanbanTypes';\nimport { KanbanCard } from './KanbanCard';\nimport { cn } from '../../core/utils';\n\ninterface KanbanColumnProps {\n  definition: KanbanColumnDef;\n  items: KanbanItem[];\n  onCardClick?: (item: KanbanItem) => void;\n}\n\nexport function KanbanColumn({ definition, items, onCardClick }: KanbanColumnProps) {\n  const { setNodeRef, isOver } = useDroppable({\n    id: definition.id,\n  });\n\n  return (\n    <div\n      className={cn(\n        \"dui-kanban-column d-flex flex-column h-100\",\n        isOver && \"dui-kanban-column-over\"\n      )}\n      style={{\n        minWidth: '300px',\n        maxWidth: '300px',\n        backgroundColor: 'var(--bg-tertiary)',\n        borderRadius: '12px',\n        border: '1px solid var(--border-color)',\n        transition: 'background-color 0.2s ease'\n      }}\n    >\n      {/* Header */}\n      <div\n        className=\"p-3 border-bottom d-flex justify-content-between align-items-center\"\n        style={{\n             borderTopLeftRadius: '12px',\n             borderTopRightRadius: '12px',\n             borderTop: `4px solid ${definition.color || '#9ca3af'}`,\n             backgroundColor: 'var(--bg-primary)'\n        }}\n      >\n        <div className=\"d-flex align-items-center gap-2\">\n            <span className=\"fw-bold text-primary dark:text-gray-100\" style={{ fontSize: '0.85rem', letterSpacing: '0.025em' }}>\n            {definition.title}\n            </span>\n            <span \n                className=\"badge rounded-pill bg-light dark:bg-gray-700 text-muted dark:text-gray-300 border dark:border-gray-600\" \n                style={{ fontSize: '0.7rem', fontWeight: 600 }}\n            >\n                {items.length}\n            </span>\n        </div>\n      </div>\n\n      {/* Body / Droppable Area */}\n      <div\n        ref={setNodeRef}\n        className=\"flex-grow-1 p-2 dui-kanban-column-body\"\n        style={{ \n            overflowY: 'auto', \n            minHeight: '200px',\n            backgroundColor: isOver ? 'var(--primary-50)' : 'transparent'\n        }}\n      >\n        <SortableContext items={items.map((i) => i.id)} strategy={verticalListSortingStrategy}>\n          {items.map((item) => (\n            <KanbanCard key={item.id} item={item} onClick={onCardClick} />\n          ))}\n        </SortableContext>\n        \n        {items.length === 0 && (\n             <div className=\"text-center text-muted mt-5\" style={{ fontSize: '0.75rem', opacity: 0.5 }}>\n                <div className=\"mb-2\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M12 2v20M2 12h20\"/></svg>\n                </div>\n                Sin elementos\n             </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  DndContext,\n  DragOverlay,\n  useSensor,\n  useSensors,\n  PointerSensor,\n  DragStartEvent,\n  DragEndEvent,\n  UniqueIdentifier,\n  closestCenter,\n} from '@dnd-kit/core';\nimport { KanbanColumnDef, KanbanItem } from './KanbanTypes';\nimport { KanbanColumn } from './KanbanColumn';\nimport { KanbanCard } from './KanbanCard';\n\ninterface KanbanBoardProps {\n  columns: KanbanColumnDef[];\n  items: KanbanItem[];\n  onItemMove: (itemId: UniqueIdentifier, newStatus: string) => void;\n  onCardClick?: (item: KanbanItem) => void;\n}\n\nexport function KanbanBoard({ columns, items, onItemMove, onCardClick }: KanbanBoardProps) {\n  const [activeId, setActiveId] = useState<UniqueIdentifier | null>(null);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 10,\n      },\n    })\n  );\n\n  const activeItem = activeId ? items.find((i) => i.id === activeId) : null;\n\n  const handleDragStart = (event: DragStartEvent) => {\n    setActiveId(event.active.id);\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    setActiveId(null);\n\n    if (!over) return;\n\n    const activeItem = items.find((i) => i.id === active.id);\n    if (!activeItem) return;\n\n    let newStatus = '';\n    \n    // Check if over.id is a column\n    const overColumn = columns.find(c => c.id === over.id);\n    if (overColumn) {\n        newStatus = overColumn.id;\n    } else {\n        // Must be an item, find its status\n        const overItem = items.find(i => i.id === over.id);\n        if (overItem) {\n            newStatus = overItem.status;\n        }\n    }\n\n    if (newStatus && newStatus !== activeItem.status) {\n      onItemMove(active.id, newStatus);\n    }\n  };\n\n  // Helper to filter items per column\n  const getItemsForColumn = (columnId: string) => {\n     return items.filter(i => i.status.toLowerCase() === columnId.toLowerCase());\n  };\n\n  return (\n    <div className=\"dui-kanban-board d-flex flex-nowrap gap-4 h-100 p-3\" style={{ overflowX: 'auto', alignItems: 'flex-start' }}>\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n      >\n        {columns.map((col) => (\n          <KanbanColumn\n            key={col.id}\n            definition={col}\n            items={getItemsForColumn(col.id)}\n            onCardClick={onCardClick}\n          />\n        ))}\n\n        <DragOverlay>\n            {activeItem ? (\n                <div style={{ opacity: 0.8, transform: 'rotate(2deg)' }}>\n                    <KanbanCard item={activeItem} isOverlay />\n                </div>\n            ) : null}\n        </DragOverlay>\n      </DndContext>\n    </div>\n  );\n}\n","import React, { useMemo } from 'react';\nimport { KanbanBoard } from './KanbanBoard';\nimport { KanbanRendererProps, KanbanItem } from './KanbanTypes';\nimport type { DataRecord } from '../../core/types';\n\n/**\n * KanbanRenderer\n * \n * Generic Kanban component for Dynamic UI Kit.\n * Maps DataRecord[] to KanbanItem[] and handles layout.\n */\nexport function KanbanRenderer({\n  columns,\n  data,\n  mapRecord,\n  mapping = {},\n  onItemMove,\n  onCardClick,\n  loading\n}: KanbanRendererProps) {\n\n  // Auto-mapping logic if mapRecord is not provided\n  const items = useMemo(() => {\n    return data.map((record): KanbanItem => {\n      if (mapRecord) return mapRecord(record);\n\n      const idKey = mapping.id || 'id';\n      const titleKey = mapping.title || 'name';\n      const subtitleKey = mapping.subtitle || 'description';\n      const statusKey = mapping.status || 'status';\n      const colorKey = mapping.color || 'color';\n\n      return {\n        id: record[idKey] as string | number,\n        title: record[titleKey] as string,\n        subtitle: record[subtitleKey] as string,\n        status: String(record[statusKey]).toLowerCase(),\n        color: record[colorKey] as string,\n        originalData: record\n      };\n    });\n  }, [data, mapRecord, mapping]);\n\n  if (loading) {\n    return (\n        <div className=\"d-flex justify-content-center align-items-center h-100 py-5\">\n            <div className=\"spinner-border text-primary\" role=\"status\">\n                <span className=\"visually-hidden\">Cargando...</span>\n            </div>\n        </div>\n    );\n  }\n\n  return (\n    <div className=\"dui-kanban-renderer h-100\" style={{ minHeight: '500px' }}>\n      <KanbanBoard\n        columns={columns}\n        items={items}\n        onItemMove={(id, status) => onItemMove?.(id, status)}\n        onCardClick={onCardClick}\n      />\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { useI18n, t } from '../i18n/I18n';\nimport { cn } from '../core/utils';\n\nexport type FieldType = 'string' | 'number' | 'date' | 'select' | 'boolean' | 'range' | 'entity';\n\nexport interface FieldOption { value: string | number; label: string }\n\nexport interface FieldConfig {\n  name: string;\n  label: string;\n  type: FieldType;\n  placeholder?: string;\n  options?: FieldOption[];\n  colSpan?: number;\n  excludeFromAdvancedSearch?: boolean;\n  entityType?: string;\n}\n\nexport interface AdvancedSearchModalProps {\n  open: boolean;\n  title?: string;\n  fields: FieldConfig[];\n  currentFilters?: any[]; // format: { field, operator, value, label? }\n  onClose: () => void;\n  onApply: (filters: any[]) => void;\n  onFilterChange?: (filters: any[]) => void;\n  /** If true, doesn't render the external overlay; useful for embedding inside another modal */\n  inline?: boolean;\n  /** List of field names to exclude from this specific instance */\n  excludeFields?: string[];\n  /** Custom field renderer */\n  renderField?: (field: FieldConfig, value: any, onChange: (val: any) => void) => React.ReactNode;\n}\n\nexport function AdvancedSearchModal({ \n  open, \n  title = '', \n  fields, \n  currentFilters = [], \n  onClose, \n  onApply, \n  onFilterChange, \n  inline = false,\n  excludeFields = [],\n  renderField\n}: AdvancedSearchModalProps) {\n  const { t } = useI18n();\n  const modalTitle = title || t('advanced_search.title', { default: 'Bsqueda Avanzada' });\n  \n  // Local state for each field\n  const [state, setState] = useState<Record<string, any>>({});\n  const [operators, setOperators] = useState<Record<string, string>>({});\n\n  // Filter out excluded fields\n  const visibleFields = fields.filter(f => \n    !f.excludeFromAdvancedSearch && !excludeFields.includes(f.name)\n  );\n\n  const OPERATORS_BY_TYPE: Record<string, { value: string; label: string }[]> = {\n    string: [\n      { value: 'contains', label: t('operators.contains', { default: 'Contiene' }) },\n      { value: 'equals', label: t('operators.equals', { default: 'Igual a' }) },\n      { value: 'startsWith', label: t('operators.startsWith', { default: 'Empieza con' }) },\n      { value: 'endsWith', label: t('operators.endsWith', { default: 'Termina con' }) },\n      { value: 'ne', label: t('operators.ne', { default: 'Distinto de' }) }\n    ],\n    number: [\n      { value: 'equals', label: t('operators.equals', { default: 'Igual a' }) },\n      { value: 'gt', label: t('operators.gt', { default: 'Mayor que' }) },\n      { value: 'gte', label: t('operators.gte', { default: 'Mayor o igual' }) },\n      { value: 'lt', label: t('operators.lt', { default: 'Menor que' }) },\n      { value: 'lte', label: t('operators.lte', { default: 'Menor o igual' }) },\n      { value: 'between', label: t('operators.between', { default: 'Entre' }) },\n      { value: 'ne', label: t('operators.ne', { default: 'Distinto de' }) }\n    ],\n    range: [\n      { value: 'between', label: t('operators.between', { default: 'Entre' }) },\n      { value: 'equals', label: t('operators.equals', { default: 'Igual a' }) },\n      { value: 'gt', label: t('operators.gt', { default: 'Mayor que' }) },\n      { value: 'gte', label: t('operators.gte', { default: 'Mayor o igual' }) },\n      { value: 'lt', label: t('operators.lt', { default: 'Menor que' }) },\n      { value: 'lte', label: t('operators.lte', { default: 'Menor o igual' }) },\n      { value: 'ne', label: t('operators.ne', { default: 'Distinto de' }) }\n    ],\n    date: [\n      { value: 'between', label: t('operators.between', { default: 'Entre' }) },\n      { value: 'equals', label: t('operators.equals', { default: 'Igual a' }) },\n      { value: 'gt', label: t('operators.after', { default: 'Posterior a' }) },\n      { value: 'gte', label: t('operators.from', { default: 'Desde' }) },\n      { value: 'lt', label: t('operators.before', { default: 'Anterior a' }) },\n      { value: 'lte', label: t('operators.until', { default: 'Hasta' }) }\n    ],\n    boolean: [\n      { value: 'equals', label: t('operators.is', { default: 'Es' }) }\n    ],\n    select: [\n      { value: 'in', label: t('operators.in', { default: 'En lista' }) },\n      { value: 'equals', label: t('operators.equals', { default: 'Igual a' }) },\n      { value: 'ne', label: t('operators.ne', { default: 'Distinto de' }) },\n      { value: 'not_in', label: t('operators.not_in', { default: 'No en lista' }) }\n    ]\n  };\n\n  // Ref to track currentFilters without triggering notification effect\n  const currentFiltersRef = React.useRef(currentFilters);\n  \n  useEffect(() => {\n    currentFiltersRef.current = currentFilters;\n  }, [currentFilters]);\n\n  useEffect(() => {\n    if (!open) return;\n    \n    // Initialize state from currentFilters\n    const s: Record<string, any> = {};\n    const ops: Record<string, string> = {};\n    \n    // Default values\n    visibleFields.forEach((f) => { \n      s[f.name] = f.type === 'boolean' ? 'any' : (f.type === 'range' || f.type === 'date' ? ['', ''] : '');\n      // Default operators\n      if (f.type === 'range' || f.type === 'date') ops[f.name] = 'between';\n      else if (f.type === 'string') ops[f.name] = 'contains';\n      else if (f.type === 'select') ops[f.name] = 'in'; // Multi-select by default\n      else ops[f.name] = 'equals';\n    });\n\n    if (Array.isArray(currentFilters) && currentFilters.length > 0) {\n      currentFilters.forEach((f: any) => {\n        if (!f.field) return;\n        \n        const fieldConfig = visibleFields.find(field => field.name === f.field);\n        if (!fieldConfig) return;\n\n        let val = f.value;\n        if (fieldConfig.type === 'boolean') {\n             val = String(val); // \"true\" / \"false\"\n        }\n        \n        s[f.field] = val;\n        if (f.operator) ops[f.field] = f.operator;\n      });\n    }\n    \n    setState(s);\n    setOperators(ops);\n  }, [open, currentFilters, fields]); \n\n  // Map state to filters array\n  const getFiltersFromState = () => {\n    const filters: any[] = [];\n    visibleFields.forEach((f) => {\n      const val = state[f.name];\n      const op = operators[f.name] || 'equals'; \n\n      // Skip empty values\n      if (val === '' || val === undefined || val === null) return;\n      if (Array.isArray(val) && val.every(v => v === '' || v === null || v === undefined)) return;\n      if (f.type === 'boolean' && val === 'any') return;\n\n      // Special handling for 'between' operator\n      if (op === 'between' && (f.type === 'range' || f.type === 'date' || f.type === 'number')) {\n         if (Array.isArray(val) && val.length === 2) {\n            const hasMin = val[0] !== '' && val[0] !== null && val[0] !== undefined;\n            const hasMax = val[1] !== '' && val[1] !== null && val[1] !== undefined;\n            \n            if (hasMin && hasMax) {\n               filters.push({ field: f.name, operator: 'between', value: f.type === 'date' ? val : [Number(val[0]), Number(val[1])], label: f.label });\n            } else if (hasMin) {\n               filters.push({ field: f.name, operator: 'gte', value: f.type === 'date' ? val[0] : Number(val[0]), label: f.label });\n            } else if (hasMax) {\n               filters.push({ field: f.name, operator: 'lte', value: f.type === 'date' ? val[1] : Number(val[1]), label: f.label });\n            }\n         }\n         return;\n      }\n\n      // Special handling for 'in' / 'not_in'\n      if ((op === 'in' || op === 'not_in') && f.type === 'select') {\n         if (Array.isArray(val) && val.length > 0) {\n            filters.push({ field: f.name, operator: op, value: val, label: f.label });\n         } else if (val && !Array.isArray(val)) {\n            filters.push({ field: f.name, operator: op, value: [val], label: f.label });\n         }\n         return;\n      }\n\n      // Standard operators\n      let finalVal = val;\n      if (f.type === 'number' || f.type === 'range') {\n         if (Array.isArray(val)) finalVal = Number(val[0]); \n         else finalVal = Number(val);\n      }\n      \n      // If boolean\n      if (f.type === 'boolean') {\n         finalVal = val === 'true';\n      }\n\n      filters.push({ field: f.name, operator: op, value: finalVal, label: f.label });\n    });\n    return filters;\n  };\n\n  // Notify changes in real-time\n  useEffect(() => {\n    if (!onFilterChange) return;\n\n    const filters = getFiltersFromState();\n    \n    const areFiltersEqual = (f1: any[], f2: any[]) => {\n      if (!f1 || !f2) return false;\n      if (f1.length !== f2.length) return false;\n      \n      const s1 = [...f1].sort((a, b) => a.field.localeCompare(b.field));\n      const s2 = [...f2].sort((a, b) => a.field.localeCompare(b.field));\n      \n      for (let i = 0; i < s1.length; i++) {\n        if (s1[i].field !== s2[i].field) return false;\n        if (s1[i].operator !== s2[i].operator) return false;\n        \n        const v1 = s1[i].value;\n        const v2 = s2[i].value;\n        \n        if (Array.isArray(v1) && Array.isArray(v2)) {\n           if (v1.length !== v2.length) return false;\n           if (v1.some((v: any, idx: number) => String(v) !== String(v2[idx]))) return false;\n        } else if (String(v1) !== String(v2)) {\n           return false;\n        }\n      }\n      return true;\n    };\n\n    if (!areFiltersEqual(filters, currentFiltersRef.current || [])) {\n      onFilterChange(filters);\n    }\n  }, [state, operators, visibleFields, onFilterChange]);\n\n  if (!open && !inline) return null;\n\n  const handleChange = (name: string, value: any) => {\n    setState(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleOperatorChange = (name: string, op: string) => {\n    setOperators(prev => ({ ...prev, [name]: op }));\n  };\n\n  const handleApply = () => {\n    onApply(getFiltersFromState());\n    onClose();\n  };\n\n  const handleClear = () => {\n    const s: Record<string, any> = {};\n    const ops: Record<string, string> = {};\n    visibleFields.forEach((f) => { \n      s[f.name] = f.type === 'boolean' ? 'any' : (f.type === 'range' || f.type === 'date' ? ['', ''] : '');\n      if (f.type === 'range' || f.type === 'date') ops[f.name] = 'between';\n      else if (f.type === 'string') ops[f.name] = 'contains';\n      else if (f.type === 'select') ops[f.name] = 'in';\n      else ops[f.name] = 'equals';\n    });\n    setState(s);\n    setOperators(ops);\n  };\n\n  const inner = (\n    <div className=\"p-6 space-y-4\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {visibleFields.map((f) => {\n          const op = operators[f.name];\n          const isBetween = op === 'between';\n          \n          return (\n          <div key={f.name} className={cn(f.colSpan === 2 ? 'col-span-1 md:col-span-2' : '')}>\n             <div className=\"flex justify-between items-center mb-1\">\n               <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{f.label}</label>\n            </div>\n            \n            <div className=\"flex gap-2\">\n               {/* Operator Selector */}\n               <select \n                 className=\"w-1/3 h-10 px-2 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-xs bg-gray-50 dark:bg-gray-700 dark:text-gray-100\"\n                 value={op}\n                 onChange={(e) => handleOperatorChange(f.name, e.target.value)}\n               >\n                 {OPERATORS_BY_TYPE[f.type === 'range' ? 'range' : (f.type === 'date' ? 'date' : (f.type === 'select' ? 'select' : (f.type === 'number' ? 'number' : (f.type === 'boolean' ? 'boolean' : 'string'))))]?.map(o => (\n                   <option key={o.value} value={o.value}>{o.label}</option>\n                 ))}\n               </select>\n\n               {/* Input(s) */}\n               <div className=\"flex-1\">\n                {(() => {\n                  const custom = renderField ? renderField(f, state[f.name], (val) => handleChange(f.name, val)) : null;\n                  if (custom) return custom;\n                  \n                  return (\n                    <>\n                 {(f.type === 'string' || (f.type === 'number' && !isBetween)) && (\n                  <input \n                    type={f.type === 'number' ? 'number' : 'text'}\n                    className=\"v2-input\" \n                    placeholder={f.placeholder || f.label} \n                    value={Array.isArray(state[f.name]) ? state[f.name][0] : (state[f.name] || '')} \n                    onChange={(e) => {\n                       if (f.type === 'range' || f.type === 'number') {\n                          const cur = Array.isArray(state[f.name]) ? [...state[f.name]] : [state[f.name] || '', ''];\n                          cur[0] = e.target.value;\n                          handleChange(f.name, cur);\n                       } else {\n                          handleChange(f.name, e.target.value);\n                       }\n                    }} \n                  />\n                )}\n\n                {f.type === 'date' && !isBetween && (\n                   <input \n                      type=\"date\" \n                      className=\"v2-input\" \n                      value={Array.isArray(state[f.name]) ? state[f.name][0] || '' : state[f.name] || ''} \n                      onChange={(e) => {\n                        const cur = Array.isArray(state[f.name]) ? [...state[f.name]] : ['', ''];\n                        cur[0] = e.target.value;\n                        handleChange(f.name, cur);\n                      }} \n                    />\n                )}\n\n                 {(f.type === 'date' || f.type === 'range' || f.type === 'number') && isBetween && (\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <input \n                      type={f.type === 'date' ? 'date' : 'number'}\n                      className=\"v2-input\" \n                      value={Array.isArray(state[f.name]) ? state[f.name][0] || '' : ''} \n                      onChange={(e) => {\n                        const cur = Array.isArray(state[f.name]) ? [...state[f.name]] : ['', ''];\n                        cur[0] = e.target.value;\n                        if (f.type === 'date' && cur[0] && !cur[1]) cur[1] = cur[0]; // Auto-fill\n                        handleChange(f.name, cur);\n                      }} \n                      placeholder={t('filters.min', { default: 'Min' })} \n                    />\n                    <input \n                      type={f.type === 'date' ? 'date' : 'number'} \n                      className=\"v2-input\" \n                      value={Array.isArray(state[f.name]) ? state[f.name][1] || '' : ''} \n                      onChange={(e) => {\n                        const cur = Array.isArray(state[f.name]) ? [...state[f.name]] : ['', ''];\n                        cur[1] = e.target.value;\n                        if (f.type === 'date' && cur[1] && !cur[0]) cur[0] = cur[1]; // Auto-fill\n                        handleChange(f.name, cur);\n                      }} \n                      placeholder={t('filters.max', { default: 'Max' })} \n                    />\n                  </div>\n                )}\n\n                {f.type === 'select' && (\n                  <div className=\"space-y-2\">\n                     <select \n                      className=\"v2-input\" \n                      value={(!Array.isArray(state[f.name]) && state[f.name]) ? state[f.name] : ''} \n                      onChange={(e) => {\n                        const val = e.target.value;\n                        if (val === '') return;\n                        \n                        const isMulti = op === 'in' || op === 'not_in';\n                        \n                        if (isMulti) {\n                           const current = Array.isArray(state[f.name]) ? state[f.name] : (state[f.name] ? [state[f.name]] : []);\n                           if (!current.includes(val)) {\n                             handleChange(f.name, [...current, val]);\n                           }\n                        } else {\n                           handleChange(f.name, val);\n                        }\n                      }}\n                    >\n                      <option value=\"\">{t('filters.any', { default: 'Cualquiera' })}</option>\n                      {f.options?.map((o) => (\n                        <option key={String(o.value)} value={o.value}>{o.label}</option>\n                      ))}\n                    </select>\n                    \n                    {/* Chips for multi-select (only if multi operator) */}\n                    {(op === 'in' || op === 'not_in') && Array.isArray(state[f.name]) && state[f.name].length > 0 && (\n                      <div className=\"flex flex-wrap gap-1 mt-1\">\n                        {state[f.name].map((v: any) => {\n                          const opt = f.options?.find(o => String(o.value) === String(v));\n                          return (\n                            <span key={String(v)} className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800\">\n                              {opt?.label || v}\n                              <button \n                                type=\"button\" \n                                onClick={() => {\n                                  const next = state[f.name].filter((x: any) => x !== v);\n                                  handleChange(f.name, next.length > 0 ? next : '');\n                                }}\n                                className=\"ml-1 text-blue-600 hover:text-blue-900 focus:outline-none\"\n                              >\n                                \n                              </button>\n                            </span>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {f.type === 'boolean' && (\n                  <select \n                    className=\"v2-input\" \n                    value={state[f.name] ?? 'any'} \n                    onChange={(e) => handleChange(f.name, e.target.value)}\n                  >\n                    <option value=\"any\">{t('filters.any', { default: 'Cualquiera' })}</option>\n                    <option value=\"true\">{t('common.yes', { default: 'S' })}</option>\n                    <option value=\"false\">{t('common.no', { default: 'No' })}</option>\n                  </select>\n                )}\n                    </>\n                  );\n                })()}\n               </div>\n            </div>\n          </div>\n        )})}\n      </div>\n\n      {!inline && (\n         <div className=\"flex justify-between items-center pt-6 border-t dark:border-gray-700 mt-6\">\n          <button \n            type=\"button\" \n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\" \n            onClick={handleClear}\n          >\n            {t('common.clear', { default: 'Limpiar' })}\n          </button>\n           <div className=\"flex gap-2\">\n            <button \n              type=\"button\" \n              className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\" \n              onClick={onClose}\n            >\n              {t('common.cancel', { default: 'Cancelar' })}\n            </button>\n             <button \n              type=\"button\" \n              className=\"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\" \n              onClick={handleApply}\n            >\n              {t('common.apply', { default: 'Aplicar' })}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  if (inline) {\n    return inner;\n  }\n\n   return (\n    <div className=\"fixed inset-0 z-[100] overflow-y-auto\">\n      <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 transition-opacity\" onClick={onClose} />\n      <div className=\"relative min-h-screen flex items-center justify-center p-4\">\n        <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-auto\">\n          <div className=\"border-b dark:border-gray-700 px-6 py-4 flex justify-between items-center\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">{modalTitle}</h2>\n            <button \n              type=\"button\" \n              onClick={onClose} \n              className=\"text-gray-400 hover:text-gray-500 transition-colors\"\n            >\n              <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {inner}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AdvancedSearchModal;"]}